<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.3"/>
    <title>hat.aio API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>




            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#Executor">Executor</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Executor.__init__">Executor</a>
                        </li>
                        <li>
                                <a class="variable" href="#Executor.async_group">async_group</a>
                        </li>
                        <li>
                                <a class="function" href="#Executor.spawn">spawn</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#create_executor">create_executor</a>
            </li>
            <li>
                    <a class="class" href="#Resource">Resource</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Resource.async_group">async_group</a>
                        </li>
                        <li>
                                <a class="variable" href="#Resource.is_open">is_open</a>
                        </li>
                        <li>
                                <a class="variable" href="#Resource.is_closing">is_closing</a>
                        </li>
                        <li>
                                <a class="variable" href="#Resource.is_closed">is_closed</a>
                        </li>
                        <li>
                                <a class="function" href="#Resource.wait_closing">wait_closing</a>
                        </li>
                        <li>
                                <a class="function" href="#Resource.wait_closed">wait_closed</a>
                        </li>
                        <li>
                                <a class="function" href="#Resource.close">close</a>
                        </li>
                        <li>
                                <a class="function" href="#Resource.async_close">async_close</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Group">Group</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Group.__init__">Group</a>
                        </li>
                        <li>
                                <a class="variable" href="#Group.async_group">async_group</a>
                        </li>
                        <li>
                                <a class="variable" href="#Group.is_open">is_open</a>
                        </li>
                        <li>
                                <a class="variable" href="#Group.is_closing">is_closing</a>
                        </li>
                        <li>
                                <a class="variable" href="#Group.is_closed">is_closed</a>
                        </li>
                        <li>
                                <a class="function" href="#Group.wait_closing">wait_closing</a>
                        </li>
                        <li>
                                <a class="function" href="#Group.wait_closed">wait_closed</a>
                        </li>
                        <li>
                                <a class="function" href="#Group.create_subgroup">create_subgroup</a>
                        </li>
                        <li>
                                <a class="function" href="#Group.wrap">wrap</a>
                        </li>
                        <li>
                                <a class="function" href="#Group.spawn">spawn</a>
                        </li>
                        <li>
                                <a class="function" href="#Group.close">close</a>
                        </li>
                        <li>
                                <a class="function" href="#Group.async_close">async_close</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#first">first</a>
            </li>
            <li>
                    <a class="function" href="#uncancellable">uncancellable</a>
            </li>
            <li>
                    <a class="variable" href="#AsyncCallable">AsyncCallable</a>
            </li>
            <li>
                    <a class="function" href="#call">call</a>
            </li>
            <li>
                    <a class="function" href="#call_on_cancel">call_on_cancel</a>
            </li>
            <li>
                    <a class="function" href="#call_on_done">call_on_done</a>
            </li>
            <li>
                    <a class="function" href="#init_asyncio">init_asyncio</a>
            </li>
            <li>
                    <a class="function" href="#run_asyncio">run_asyncio</a>
            </li>
            <li>
                    <a class="class" href="#QueueClosedError">QueueClosedError</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#QueueEmptyError">QueueEmptyError</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#QueueFullError">QueueFullError</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#Queue">Queue</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Queue.__init__">Queue</a>
                        </li>
                        <li>
                                <a class="variable" href="#Queue.maxsize">maxsize</a>
                        </li>
                        <li>
                                <a class="variable" href="#Queue.is_closed">is_closed</a>
                        </li>
                        <li>
                                <a class="function" href="#Queue.empty">empty</a>
                        </li>
                        <li>
                                <a class="function" href="#Queue.full">full</a>
                        </li>
                        <li>
                                <a class="function" href="#Queue.qsize">qsize</a>
                        </li>
                        <li>
                                <a class="function" href="#Queue.close">close</a>
                        </li>
                        <li>
                                <a class="function" href="#Queue.get_nowait">get_nowait</a>
                        </li>
                        <li>
                                <a class="function" href="#Queue.put_nowait">put_nowait</a>
                        </li>
                        <li>
                                <a class="function" href="#Queue.get">get</a>
                        </li>
                        <li>
                                <a class="function" href="#Queue.put">put</a>
                        </li>
                        <li>
                                <a class="function" href="#Queue.get_until_empty">get_until_empty</a>
                        </li>
                        <li>
                                <a class="function" href="#Queue.get_nowait_until_empty">get_nowait_until_empty</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CancelledWithResultError">CancelledWithResultError</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CancelledWithResultError.__init__">CancelledWithResultError</a>
                        </li>
                        <li>
                                <a class="variable" href="#CancelledWithResultError.result">result</a>
                        </li>
                        <li>
                                <a class="variable" href="#CancelledWithResultError.exception">exception</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#wait_for">wait_for</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
hat<wbr>.aio    </h1>

                        <div class="docstring"><p>Async utility functions</p>
</div>

                        <input id="mod-aio-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-aio-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos"> 1</span></a><span class="sd">&quot;&quot;&quot;Async utility functions&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos"> 2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos"> 3</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">hat.aio.executor</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span><span class="n">Executor</span><span class="p">,</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos"> 4</span></a>                              <span class="n">create_executor</span><span class="p">)</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos"> 5</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">hat.aio.group</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span><span class="n">Resource</span><span class="p">,</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos"> 6</span></a>                           <span class="n">Group</span><span class="p">)</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos"> 7</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">hat.aio.misc</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span><span class="n">first</span><span class="p">,</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos"> 8</span></a>                          <span class="n">uncancellable</span><span class="p">,</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos"> 9</span></a>                          <span class="n">AsyncCallable</span><span class="p">,</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">10</span></a>                          <span class="n">call</span><span class="p">,</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">11</span></a>                          <span class="n">call_on_cancel</span><span class="p">,</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">12</span></a>                          <span class="n">call_on_done</span><span class="p">,</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">13</span></a>                          <span class="n">init_asyncio</span><span class="p">,</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">14</span></a>                          <span class="n">run_asyncio</span><span class="p">)</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">15</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">hat.aio.queue</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span><span class="n">QueueClosedError</span><span class="p">,</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">16</span></a>                           <span class="n">QueueEmptyError</span><span class="p">,</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">17</span></a>                           <span class="n">QueueFullError</span><span class="p">,</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">18</span></a>                           <span class="n">Queue</span><span class="p">)</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">19</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">hat.aio.wait</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span><span class="n">CancelledWithResultError</span><span class="p">,</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">20</span></a>                          <span class="n">wait_for</span><span class="p">)</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos">22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos">23</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Executor&#39;</span><span class="p">,</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">24</span></a>           <span class="s1">&#39;create_executor&#39;</span><span class="p">,</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">25</span></a>           <span class="s1">&#39;Resource&#39;</span><span class="p">,</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">26</span></a>           <span class="s1">&#39;Group&#39;</span><span class="p">,</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">27</span></a>           <span class="s1">&#39;first&#39;</span><span class="p">,</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">28</span></a>           <span class="s1">&#39;uncancellable&#39;</span><span class="p">,</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">29</span></a>           <span class="s1">&#39;AsyncCallable&#39;</span><span class="p">,</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">30</span></a>           <span class="s1">&#39;call&#39;</span><span class="p">,</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">31</span></a>           <span class="s1">&#39;call_on_cancel&#39;</span><span class="p">,</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">32</span></a>           <span class="s1">&#39;call_on_done&#39;</span><span class="p">,</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">33</span></a>           <span class="s1">&#39;init_asyncio&#39;</span><span class="p">,</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">34</span></a>           <span class="s1">&#39;run_asyncio&#39;</span><span class="p">,</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">35</span></a>           <span class="s1">&#39;QueueClosedError&#39;</span><span class="p">,</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">36</span></a>           <span class="s1">&#39;QueueEmptyError&#39;</span><span class="p">,</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">37</span></a>           <span class="s1">&#39;QueueFullError&#39;</span><span class="p">,</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">38</span></a>           <span class="s1">&#39;Queue&#39;</span><span class="p">,</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">39</span></a>           <span class="s1">&#39;CancelledWithResultError&#39;</span><span class="p">,</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">40</span></a>           <span class="s1">&#39;wait_for&#39;</span><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="Executor">
                            <input id="Executor-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Executor</span><wbr>(<span class="base"><a href="#Resource">hat.aio.Resource</a></span>):

                <label class="view-source-button" for="Executor-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Executor"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Executor-11"><a href="#Executor-11"><span class="linenos">11</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Executor</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
</span><span id="Executor-12"><a href="#Executor-12"><span class="linenos">12</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Executor wrapping `asyncio.loop.run_in_executor`.</span>
</span><span id="Executor-13"><a href="#Executor-13"><span class="linenos">13</span></a>
</span><span id="Executor-14"><a href="#Executor-14"><span class="linenos">14</span></a><span class="sd">    Wrapped executor is created from `executor_cls` with provided `args`.</span>
</span><span id="Executor-15"><a href="#Executor-15"><span class="linenos">15</span></a>
</span><span id="Executor-16"><a href="#Executor-16"><span class="linenos">16</span></a><span class="sd">    If `wait_futures` is ``True``, executor will be closed once all running</span>
</span><span id="Executor-17"><a href="#Executor-17"><span class="linenos">17</span></a><span class="sd">    tasks finishes.</span>
</span><span id="Executor-18"><a href="#Executor-18"><span class="linenos">18</span></a>
</span><span id="Executor-19"><a href="#Executor-19"><span class="linenos">19</span></a><span class="sd">    `log_exceptions` is delegated to `async_group`.</span>
</span><span id="Executor-20"><a href="#Executor-20"><span class="linenos">20</span></a>
</span><span id="Executor-21"><a href="#Executor-21"><span class="linenos">21</span></a><span class="sd">    Args:</span>
</span><span id="Executor-22"><a href="#Executor-22"><span class="linenos">22</span></a><span class="sd">        args: executor args</span>
</span><span id="Executor-23"><a href="#Executor-23"><span class="linenos">23</span></a><span class="sd">        executor_cls: executor class</span>
</span><span id="Executor-24"><a href="#Executor-24"><span class="linenos">24</span></a><span class="sd">        log_exceptions: log exceptions</span>
</span><span id="Executor-25"><a href="#Executor-25"><span class="linenos">25</span></a>
</span><span id="Executor-26"><a href="#Executor-26"><span class="linenos">26</span></a><span class="sd">    Example::</span>
</span><span id="Executor-27"><a href="#Executor-27"><span class="linenos">27</span></a>
</span><span id="Executor-28"><a href="#Executor-28"><span class="linenos">28</span></a><span class="sd">        executor1 = Executor()</span>
</span><span id="Executor-29"><a href="#Executor-29"><span class="linenos">29</span></a><span class="sd">        executor2 = Executor()</span>
</span><span id="Executor-30"><a href="#Executor-30"><span class="linenos">30</span></a><span class="sd">        tid1 = await executor1.spawn(threading.get_ident)</span>
</span><span id="Executor-31"><a href="#Executor-31"><span class="linenos">31</span></a><span class="sd">        tid2 = await executor2.spawn(threading.get_ident)</span>
</span><span id="Executor-32"><a href="#Executor-32"><span class="linenos">32</span></a><span class="sd">        assert tid1 != tid2</span>
</span><span id="Executor-33"><a href="#Executor-33"><span class="linenos">33</span></a>
</span><span id="Executor-34"><a href="#Executor-34"><span class="linenos">34</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Executor-35"><a href="#Executor-35"><span class="linenos">35</span></a>
</span><span id="Executor-36"><a href="#Executor-36"><span class="linenos">36</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Executor-37"><a href="#Executor-37"><span class="linenos">37</span></a>                 <span class="o">*</span><span class="n">args</span><span class="p">,</span>
</span><span id="Executor-38"><a href="#Executor-38"><span class="linenos">38</span></a>                 <span class="n">executor_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">]</span> <span class="o">=</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ThreadPoolExecutor</span><span class="p">,</span>  <span class="c1"># NOQA</span>
</span><span id="Executor-39"><a href="#Executor-39"><span class="linenos">39</span></a>                 <span class="n">log_exceptions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Executor-40"><a href="#Executor-40"><span class="linenos">40</span></a>                 <span class="n">wait_futures</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="Executor-41"><a href="#Executor-41"><span class="linenos">41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wait_futures</span> <span class="o">=</span> <span class="n">wait_futures</span>
</span><span id="Executor-42"><a href="#Executor-42"><span class="linenos">42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="n">executor_cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Executor-43"><a href="#Executor-43"><span class="linenos">43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
</span><span id="Executor-44"><a href="#Executor-44"><span class="linenos">44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_async_group</span> <span class="o">=</span> <span class="n">Group</span><span class="p">(</span><span class="n">log_exceptions</span><span class="p">)</span>
</span><span id="Executor-45"><a href="#Executor-45"><span class="linenos">45</span></a>
</span><span id="Executor-46"><a href="#Executor-46"><span class="linenos">46</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">call_on_cancel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="o">.</span><span class="n">shutdown</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="Executor-47"><a href="#Executor-47"><span class="linenos">47</span></a>
</span><span id="Executor-48"><a href="#Executor-48"><span class="linenos">48</span></a>    <span class="nd">@property</span>
</span><span id="Executor-49"><a href="#Executor-49"><span class="linenos">49</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">async_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Executor-50"><a href="#Executor-50"><span class="linenos">50</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Async group&quot;&quot;&quot;</span>
</span><span id="Executor-51"><a href="#Executor-51"><span class="linenos">51</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_async_group</span>
</span><span id="Executor-52"><a href="#Executor-52"><span class="linenos">52</span></a>
</span><span id="Executor-53"><a href="#Executor-53"><span class="linenos">53</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">spawn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Executor-54"><a href="#Executor-54"><span class="linenos">54</span></a>              <span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
</span><span id="Executor-55"><a href="#Executor-55"><span class="linenos">55</span></a>              <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="Executor-56"><a href="#Executor-56"><span class="linenos">56</span></a>              <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">:</span>
</span><span id="Executor-57"><a href="#Executor-57"><span class="linenos">57</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Spawn new task&quot;&quot;&quot;</span>
</span><span id="Executor-58"><a href="#Executor-58"><span class="linenos">58</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spawn</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span><span id="Executor-59"><a href="#Executor-59"><span class="linenos">59</span></a>
</span><span id="Executor-60"><a href="#Executor-60"><span class="linenos">60</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_spawn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
</span><span id="Executor-61"><a href="#Executor-61"><span class="linenos">61</span></a>        <span class="n">func</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Executor-62"><a href="#Executor-62"><span class="linenos">62</span></a>        <span class="n">coro</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
</span><span id="Executor-63"><a href="#Executor-63"><span class="linenos">63</span></a>
</span><span id="Executor-64"><a href="#Executor-64"><span class="linenos">64</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_futures</span><span class="p">:</span>
</span><span id="Executor-65"><a href="#Executor-65"><span class="linenos">65</span></a>            <span class="n">coro</span> <span class="o">=</span> <span class="n">uncancellable</span><span class="p">(</span><span class="n">coro</span><span class="p">)</span>
</span><span id="Executor-66"><a href="#Executor-66"><span class="linenos">66</span></a>
</span><span id="Executor-67"><a href="#Executor-67"><span class="linenos">67</span></a>        <span class="k">return</span> <span class="k">await</span> <span class="n">coro</span>
</span></pre></div>


            <div class="docstring"><p>Executor wrapping <code>asyncio.loop.run_in_executor</code>.</p>

<p>Wrapped executor is created from <code>executor_cls</code> with provided <code>args</code>.</p>

<p>If <code>wait_futures</code> is <code>True</code>, executor will be closed once all running
tasks finishes.</p>

<p><code>log_exceptions</code> is delegated to <code><a href="#Executor.async_group">async_group</a></code>.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>args:</strong>  executor args</li>
<li><strong>executor_cls:</strong>  executor class</li>
<li><strong>log_exceptions:</strong>  log exceptions</li>
</ul>

<p>Example::</p>

<pre><code>executor1 = Executor()
executor2 = Executor()
tid1 = await executor1.spawn(threading.get_ident)
tid2 = await executor2.spawn(threading.get_ident)
assert tid1 != tid2
</code></pre>
</div>


                            <div id="Executor.__init__" class="classattr">
                                        <input id="Executor.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Executor</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span><span class="n">args</span>,</span><span class="param">	executor_cls: type[concurrent.futures._base.Executor] = &lt;class &#x27;concurrent.futures.thread.ThreadPoolExecutor&#x27;&gt;,</span><span class="param">	<span class="n">log_exceptions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">wait_futures</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="Executor.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Executor.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Executor.__init__-36"><a href="#Executor.__init__-36"><span class="linenos">36</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Executor.__init__-37"><a href="#Executor.__init__-37"><span class="linenos">37</span></a>                 <span class="o">*</span><span class="n">args</span><span class="p">,</span>
</span><span id="Executor.__init__-38"><a href="#Executor.__init__-38"><span class="linenos">38</span></a>                 <span class="n">executor_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">]</span> <span class="o">=</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ThreadPoolExecutor</span><span class="p">,</span>  <span class="c1"># NOQA</span>
</span><span id="Executor.__init__-39"><a href="#Executor.__init__-39"><span class="linenos">39</span></a>                 <span class="n">log_exceptions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Executor.__init__-40"><a href="#Executor.__init__-40"><span class="linenos">40</span></a>                 <span class="n">wait_futures</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="Executor.__init__-41"><a href="#Executor.__init__-41"><span class="linenos">41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wait_futures</span> <span class="o">=</span> <span class="n">wait_futures</span>
</span><span id="Executor.__init__-42"><a href="#Executor.__init__-42"><span class="linenos">42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span> <span class="o">=</span> <span class="n">executor_cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="Executor.__init__-43"><a href="#Executor.__init__-43"><span class="linenos">43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
</span><span id="Executor.__init__-44"><a href="#Executor.__init__-44"><span class="linenos">44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_async_group</span> <span class="o">=</span> <span class="n">Group</span><span class="p">(</span><span class="n">log_exceptions</span><span class="p">)</span>
</span><span id="Executor.__init__-45"><a href="#Executor.__init__-45"><span class="linenos">45</span></a>
</span><span id="Executor.__init__-46"><a href="#Executor.__init__-46"><span class="linenos">46</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">call_on_cancel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="o">.</span><span class="n">shutdown</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Executor.async_group" class="classattr">
                                        <input id="Executor.async_group-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">async_group</span>

                <label class="view-source-button" for="Executor.async_group-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Executor.async_group"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Executor.async_group-48"><a href="#Executor.async_group-48"><span class="linenos">48</span></a>    <span class="nd">@property</span>
</span><span id="Executor.async_group-49"><a href="#Executor.async_group-49"><span class="linenos">49</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">async_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Executor.async_group-50"><a href="#Executor.async_group-50"><span class="linenos">50</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Async group&quot;&quot;&quot;</span>
</span><span id="Executor.async_group-51"><a href="#Executor.async_group-51"><span class="linenos">51</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_async_group</span>
</span></pre></div>


            <div class="docstring"><p>Async group</p>
</div>


                            </div>
                            <div id="Executor.spawn" class="classattr">
                                        <input id="Executor.spawn-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">spawn</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">_asyncio</span><span class="o">.</span><span class="n">Task</span>:</span></span>

                <label class="view-source-button" for="Executor.spawn-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Executor.spawn"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Executor.spawn-53"><a href="#Executor.spawn-53"><span class="linenos">53</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">spawn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Executor.spawn-54"><a href="#Executor.spawn-54"><span class="linenos">54</span></a>              <span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
</span><span id="Executor.spawn-55"><a href="#Executor.spawn-55"><span class="linenos">55</span></a>              <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="Executor.spawn-56"><a href="#Executor.spawn-56"><span class="linenos">56</span></a>              <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">:</span>
</span><span id="Executor.spawn-57"><a href="#Executor.spawn-57"><span class="linenos">57</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Spawn new task&quot;&quot;&quot;</span>
</span><span id="Executor.spawn-58"><a href="#Executor.spawn-58"><span class="linenos">58</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spawn</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Spawn new task</p>
</div>


                            </div>
                </section>
                <section id="create_executor">
                            <input id="create_executor-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_executor</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span><span class="n">args</span>,</span><span class="param">	executor_cls: type[concurrent.futures._base.Executor] = &lt;class &#x27;concurrent.futures.thread.ThreadPoolExecutor&#x27;&gt;,</span><span class="param">	<span class="n">loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">AbstractEventLoop</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="create_executor-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#create_executor"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="create_executor-70"><a href="#create_executor-70"><span class="linenos"> 70</span></a><span class="k">def</span><span class="w"> </span><span class="nf">create_executor</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span>
</span><span id="create_executor-71"><a href="#create_executor-71"><span class="linenos"> 71</span></a>                    <span class="n">executor_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">Executor</span><span class="p">]</span> <span class="o">=</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ThreadPoolExecutor</span><span class="p">,</span>  <span class="c1"># NOQA</span>
</span><span id="create_executor-72"><a href="#create_executor-72"><span class="linenos"> 72</span></a>                    <span class="n">loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">AbstractEventLoop</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="create_executor-73"><a href="#create_executor-73"><span class="linenos"> 73</span></a>                    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">]:</span>
</span><span id="create_executor-74"><a href="#create_executor-74"><span class="linenos"> 74</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create `asyncio.loop.run_in_executor` wrapper.</span>
</span><span id="create_executor-75"><a href="#create_executor-75"><span class="linenos"> 75</span></a>
</span><span id="create_executor-76"><a href="#create_executor-76"><span class="linenos"> 76</span></a><span class="sd">    Wrapped executor is created from `executor_cls` with provided `args`.</span>
</span><span id="create_executor-77"><a href="#create_executor-77"><span class="linenos"> 77</span></a>
</span><span id="create_executor-78"><a href="#create_executor-78"><span class="linenos"> 78</span></a><span class="sd">    This function returns coroutine that takes a function and its arguments,</span>
</span><span id="create_executor-79"><a href="#create_executor-79"><span class="linenos"> 79</span></a><span class="sd">    executes the function in executor and returns the result.</span>
</span><span id="create_executor-80"><a href="#create_executor-80"><span class="linenos"> 80</span></a>
</span><span id="create_executor-81"><a href="#create_executor-81"><span class="linenos"> 81</span></a><span class="sd">    Args:</span>
</span><span id="create_executor-82"><a href="#create_executor-82"><span class="linenos"> 82</span></a><span class="sd">        args: executor args</span>
</span><span id="create_executor-83"><a href="#create_executor-83"><span class="linenos"> 83</span></a><span class="sd">        executor_cls: executor class</span>
</span><span id="create_executor-84"><a href="#create_executor-84"><span class="linenos"> 84</span></a><span class="sd">        loop: asyncio loop</span>
</span><span id="create_executor-85"><a href="#create_executor-85"><span class="linenos"> 85</span></a>
</span><span id="create_executor-86"><a href="#create_executor-86"><span class="linenos"> 86</span></a><span class="sd">    Returns:</span>
</span><span id="create_executor-87"><a href="#create_executor-87"><span class="linenos"> 87</span></a><span class="sd">        executor coroutine</span>
</span><span id="create_executor-88"><a href="#create_executor-88"><span class="linenos"> 88</span></a>
</span><span id="create_executor-89"><a href="#create_executor-89"><span class="linenos"> 89</span></a><span class="sd">    Example::</span>
</span><span id="create_executor-90"><a href="#create_executor-90"><span class="linenos"> 90</span></a>
</span><span id="create_executor-91"><a href="#create_executor-91"><span class="linenos"> 91</span></a><span class="sd">        executor1 = create_executor()</span>
</span><span id="create_executor-92"><a href="#create_executor-92"><span class="linenos"> 92</span></a><span class="sd">        executor2 = create_executor()</span>
</span><span id="create_executor-93"><a href="#create_executor-93"><span class="linenos"> 93</span></a><span class="sd">        tid1 = await executor1(threading.get_ident)</span>
</span><span id="create_executor-94"><a href="#create_executor-94"><span class="linenos"> 94</span></a><span class="sd">        tid2 = await executor2(threading.get_ident)</span>
</span><span id="create_executor-95"><a href="#create_executor-95"><span class="linenos"> 95</span></a><span class="sd">        assert tid1 != tid2</span>
</span><span id="create_executor-96"><a href="#create_executor-96"><span class="linenos"> 96</span></a>
</span><span id="create_executor-97"><a href="#create_executor-97"><span class="linenos"> 97</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="create_executor-98"><a href="#create_executor-98"><span class="linenos"> 98</span></a>    <span class="n">executor</span> <span class="o">=</span> <span class="n">executor_cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="create_executor-99"><a href="#create_executor-99"><span class="linenos"> 99</span></a>
</span><span id="create_executor-100"><a href="#create_executor-100"><span class="linenos">100</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">executor_wrapper</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="create_executor-101"><a href="#create_executor-101"><span class="linenos">101</span></a>        <span class="n">_loop</span> <span class="o">=</span> <span class="n">loop</span> <span class="ow">or</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
</span><span id="create_executor-102"><a href="#create_executor-102"><span class="linenos">102</span></a>        <span class="n">fn</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="create_executor-103"><a href="#create_executor-103"><span class="linenos">103</span></a>        <span class="k">return</span> <span class="k">await</span> <span class="n">_loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span><span class="n">executor</span><span class="p">,</span> <span class="n">fn</span><span class="p">)</span>
</span><span id="create_executor-104"><a href="#create_executor-104"><span class="linenos">104</span></a>
</span><span id="create_executor-105"><a href="#create_executor-105"><span class="linenos">105</span></a>    <span class="k">return</span> <span class="n">executor_wrapper</span>
</span></pre></div>


            <div class="docstring"><p>Create <code>asyncio.loop.run_in_executor</code> wrapper.</p>

<p>Wrapped executor is created from <code>executor_cls</code> with provided <code>args</code>.</p>

<p>This function returns coroutine that takes a function and its arguments,
executes the function in executor and returns the result.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>args:</strong>  executor args</li>
<li><strong>executor_cls:</strong>  executor class</li>
<li><strong>loop:</strong>  asyncio loop</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>executor coroutine</p>
</blockquote>

<p>Example::</p>

<pre><code>executor1 = create_executor()
executor2 = create_executor()
tid1 = await executor1(threading.get_ident)
tid2 = await executor2(threading.get_ident)
assert tid1 != tid2
</code></pre>
</div>


                </section>
                <section id="Resource">
                            <input id="Resource-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Resource</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="Resource-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Resource"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Resource-13"><a href="#Resource-13"><span class="linenos">13</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Resource</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="Resource-14"><a href="#Resource-14"><span class="linenos">14</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Resource with lifetime control based on `Group`.&quot;&quot;&quot;</span>
</span><span id="Resource-15"><a href="#Resource-15"><span class="linenos">15</span></a>
</span><span id="Resource-16"><a href="#Resource-16"><span class="linenos">16</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Resource-17"><a href="#Resource-17"><span class="linenos">17</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Resource-18"><a href="#Resource-18"><span class="linenos">18</span></a>
</span><span id="Resource-19"><a href="#Resource-19"><span class="linenos">19</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aexit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
</span><span id="Resource-20"><a href="#Resource-20"><span class="linenos">20</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_close</span><span class="p">()</span>
</span><span id="Resource-21"><a href="#Resource-21"><span class="linenos">21</span></a>
</span><span id="Resource-22"><a href="#Resource-22"><span class="linenos">22</span></a>    <span class="nd">@property</span>
</span><span id="Resource-23"><a href="#Resource-23"><span class="linenos">23</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="Resource-24"><a href="#Resource-24"><span class="linenos">24</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">async_group</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Group&#39;</span><span class="p">:</span>
</span><span id="Resource-25"><a href="#Resource-25"><span class="linenos">25</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Group controlling resource&#39;s lifetime.&quot;&quot;&quot;</span>
</span><span id="Resource-26"><a href="#Resource-26"><span class="linenos">26</span></a>
</span><span id="Resource-27"><a href="#Resource-27"><span class="linenos">27</span></a>    <span class="nd">@property</span>
</span><span id="Resource-28"><a href="#Resource-28"><span class="linenos">28</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_open</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Resource-29"><a href="#Resource-29"><span class="linenos">29</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;``True`` if not closing or closed, ``False`` otherwise.&quot;&quot;&quot;</span>
</span><span id="Resource-30"><a href="#Resource-30"><span class="linenos">30</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">is_open</span>
</span><span id="Resource-31"><a href="#Resource-31"><span class="linenos">31</span></a>
</span><span id="Resource-32"><a href="#Resource-32"><span class="linenos">32</span></a>    <span class="nd">@property</span>
</span><span id="Resource-33"><a href="#Resource-33"><span class="linenos">33</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_closing</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Resource-34"><a href="#Resource-34"><span class="linenos">34</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Is resource closing or closed.&quot;&quot;&quot;</span>
</span><span id="Resource-35"><a href="#Resource-35"><span class="linenos">35</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">is_closing</span>
</span><span id="Resource-36"><a href="#Resource-36"><span class="linenos">36</span></a>
</span><span id="Resource-37"><a href="#Resource-37"><span class="linenos">37</span></a>    <span class="nd">@property</span>
</span><span id="Resource-38"><a href="#Resource-38"><span class="linenos">38</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Resource-39"><a href="#Resource-39"><span class="linenos">39</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Is resource closed.&quot;&quot;&quot;</span>
</span><span id="Resource-40"><a href="#Resource-40"><span class="linenos">40</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">is_closed</span>
</span><span id="Resource-41"><a href="#Resource-41"><span class="linenos">41</span></a>
</span><span id="Resource-42"><a href="#Resource-42"><span class="linenos">42</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_closing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Resource-43"><a href="#Resource-43"><span class="linenos">43</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait until closing is ``True``.&quot;&quot;&quot;</span>
</span><span id="Resource-44"><a href="#Resource-44"><span class="linenos">44</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">wait_closing</span><span class="p">()</span>
</span><span id="Resource-45"><a href="#Resource-45"><span class="linenos">45</span></a>
</span><span id="Resource-46"><a href="#Resource-46"><span class="linenos">46</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Resource-47"><a href="#Resource-47"><span class="linenos">47</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait until closed is ``True``.&quot;&quot;&quot;</span>
</span><span id="Resource-48"><a href="#Resource-48"><span class="linenos">48</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">wait_closed</span><span class="p">()</span>
</span><span id="Resource-49"><a href="#Resource-49"><span class="linenos">49</span></a>
</span><span id="Resource-50"><a href="#Resource-50"><span class="linenos">50</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Resource-51"><a href="#Resource-51"><span class="linenos">51</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Close resource.&quot;&quot;&quot;</span>
</span><span id="Resource-52"><a href="#Resource-52"><span class="linenos">52</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Resource-53"><a href="#Resource-53"><span class="linenos">53</span></a>
</span><span id="Resource-54"><a href="#Resource-54"><span class="linenos">54</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Resource-55"><a href="#Resource-55"><span class="linenos">55</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Close resource and wait until closed is ``True``.&quot;&quot;&quot;</span>
</span><span id="Resource-56"><a href="#Resource-56"><span class="linenos">56</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">async_close</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Resource with lifetime control based on <code><a href="#Group">Group</a></code>.</p>
</div>


                            <div id="Resource.async_group" class="classattr">
                                        <input id="Resource.async_group-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">async_group</span><span class="annotation">: <a href="#Group">Group</a></span>

                <label class="view-source-button" for="Resource.async_group-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Resource.async_group"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Resource.async_group-22"><a href="#Resource.async_group-22"><span class="linenos">22</span></a>    <span class="nd">@property</span>
</span><span id="Resource.async_group-23"><a href="#Resource.async_group-23"><span class="linenos">23</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="Resource.async_group-24"><a href="#Resource.async_group-24"><span class="linenos">24</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">async_group</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Group&#39;</span><span class="p">:</span>
</span><span id="Resource.async_group-25"><a href="#Resource.async_group-25"><span class="linenos">25</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Group controlling resource&#39;s lifetime.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Group controlling resource's lifetime.</p>
</div>


                            </div>
                            <div id="Resource.is_open" class="classattr">
                                        <input id="Resource.is_open-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">is_open</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Resource.is_open-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Resource.is_open"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Resource.is_open-27"><a href="#Resource.is_open-27"><span class="linenos">27</span></a>    <span class="nd">@property</span>
</span><span id="Resource.is_open-28"><a href="#Resource.is_open-28"><span class="linenos">28</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_open</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Resource.is_open-29"><a href="#Resource.is_open-29"><span class="linenos">29</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;``True`` if not closing or closed, ``False`` otherwise.&quot;&quot;&quot;</span>
</span><span id="Resource.is_open-30"><a href="#Resource.is_open-30"><span class="linenos">30</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">is_open</span>
</span></pre></div>


            <div class="docstring"><p><code>True</code> if not closing or closed, <code>False</code> otherwise.</p>
</div>


                            </div>
                            <div id="Resource.is_closing" class="classattr">
                                        <input id="Resource.is_closing-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">is_closing</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Resource.is_closing-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Resource.is_closing"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Resource.is_closing-32"><a href="#Resource.is_closing-32"><span class="linenos">32</span></a>    <span class="nd">@property</span>
</span><span id="Resource.is_closing-33"><a href="#Resource.is_closing-33"><span class="linenos">33</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_closing</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Resource.is_closing-34"><a href="#Resource.is_closing-34"><span class="linenos">34</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Is resource closing or closed.&quot;&quot;&quot;</span>
</span><span id="Resource.is_closing-35"><a href="#Resource.is_closing-35"><span class="linenos">35</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">is_closing</span>
</span></pre></div>


            <div class="docstring"><p>Is resource closing or closed.</p>
</div>


                            </div>
                            <div id="Resource.is_closed" class="classattr">
                                        <input id="Resource.is_closed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">is_closed</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Resource.is_closed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Resource.is_closed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Resource.is_closed-37"><a href="#Resource.is_closed-37"><span class="linenos">37</span></a>    <span class="nd">@property</span>
</span><span id="Resource.is_closed-38"><a href="#Resource.is_closed-38"><span class="linenos">38</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Resource.is_closed-39"><a href="#Resource.is_closed-39"><span class="linenos">39</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Is resource closed.&quot;&quot;&quot;</span>
</span><span id="Resource.is_closed-40"><a href="#Resource.is_closed-40"><span class="linenos">40</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">is_closed</span>
</span></pre></div>


            <div class="docstring"><p>Is resource closed.</p>
</div>


                            </div>
                            <div id="Resource.wait_closing" class="classattr">
                                        <input id="Resource.wait_closing-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">wait_closing</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Resource.wait_closing-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Resource.wait_closing"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Resource.wait_closing-42"><a href="#Resource.wait_closing-42"><span class="linenos">42</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_closing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Resource.wait_closing-43"><a href="#Resource.wait_closing-43"><span class="linenos">43</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait until closing is ``True``.&quot;&quot;&quot;</span>
</span><span id="Resource.wait_closing-44"><a href="#Resource.wait_closing-44"><span class="linenos">44</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">wait_closing</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Wait until closing is <code>True</code>.</p>
</div>


                            </div>
                            <div id="Resource.wait_closed" class="classattr">
                                        <input id="Resource.wait_closed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">wait_closed</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Resource.wait_closed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Resource.wait_closed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Resource.wait_closed-46"><a href="#Resource.wait_closed-46"><span class="linenos">46</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Resource.wait_closed-47"><a href="#Resource.wait_closed-47"><span class="linenos">47</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait until closed is ``True``.&quot;&quot;&quot;</span>
</span><span id="Resource.wait_closed-48"><a href="#Resource.wait_closed-48"><span class="linenos">48</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">wait_closed</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Wait until closed is <code>True</code>.</p>
</div>


                            </div>
                            <div id="Resource.close" class="classattr">
                                        <input id="Resource.close-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">close</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Resource.close-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Resource.close"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Resource.close-50"><a href="#Resource.close-50"><span class="linenos">50</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Resource.close-51"><a href="#Resource.close-51"><span class="linenos">51</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Close resource.&quot;&quot;&quot;</span>
</span><span id="Resource.close-52"><a href="#Resource.close-52"><span class="linenos">52</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Close resource.</p>
</div>


                            </div>
                            <div id="Resource.async_close" class="classattr">
                                        <input id="Resource.async_close-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">async_close</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Resource.async_close-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Resource.async_close"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Resource.async_close-54"><a href="#Resource.async_close-54"><span class="linenos">54</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Resource.async_close-55"><a href="#Resource.async_close-55"><span class="linenos">55</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Close resource and wait until closed is ``True``.&quot;&quot;&quot;</span>
</span><span id="Resource.async_close-56"><a href="#Resource.async_close-56"><span class="linenos">56</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_group</span><span class="o">.</span><span class="n">async_close</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Close resource and wait until closed is <code>True</code>.</p>
</div>


                            </div>
                </section>
                <section id="Group">
                            <input id="Group-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Group</span><wbr>(<span class="base"><a href="#Resource">hat.aio.Resource</a></span>):

                <label class="view-source-button" for="Group-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group-63"><a href="#Group-63"><span class="linenos"> 63</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Group</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
</span><span id="Group-64"><a href="#Group-64"><span class="linenos"> 64</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Group of asyncio Tasks.</span>
</span><span id="Group-65"><a href="#Group-65"><span class="linenos"> 65</span></a>
</span><span id="Group-66"><a href="#Group-66"><span class="linenos"> 66</span></a><span class="sd">    Group enables creation and management of related asyncio Tasks. The</span>
</span><span id="Group-67"><a href="#Group-67"><span class="linenos"> 67</span></a><span class="sd">    Group ensures uninterrupted execution of Tasks and Task completion upon</span>
</span><span id="Group-68"><a href="#Group-68"><span class="linenos"> 68</span></a><span class="sd">    Group closing.</span>
</span><span id="Group-69"><a href="#Group-69"><span class="linenos"> 69</span></a>
</span><span id="Group-70"><a href="#Group-70"><span class="linenos"> 70</span></a><span class="sd">    Group can contain subgroups, which are independent Groups managed by the</span>
</span><span id="Group-71"><a href="#Group-71"><span class="linenos"> 71</span></a><span class="sd">    parent Group.</span>
</span><span id="Group-72"><a href="#Group-72"><span class="linenos"> 72</span></a>
</span><span id="Group-73"><a href="#Group-73"><span class="linenos"> 73</span></a><span class="sd">    If a Task raises exception, other Tasks continue to execute.</span>
</span><span id="Group-74"><a href="#Group-74"><span class="linenos"> 74</span></a>
</span><span id="Group-75"><a href="#Group-75"><span class="linenos"> 75</span></a><span class="sd">    If `log_exceptions` is ``True``, exceptions raised by spawned tasks are</span>
</span><span id="Group-76"><a href="#Group-76"><span class="linenos"> 76</span></a><span class="sd">    logged with level ERROR.</span>
</span><span id="Group-77"><a href="#Group-77"><span class="linenos"> 77</span></a>
</span><span id="Group-78"><a href="#Group-78"><span class="linenos"> 78</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Group-79"><a href="#Group-79"><span class="linenos"> 79</span></a>
</span><span id="Group-80"><a href="#Group-80"><span class="linenos"> 80</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Group-81"><a href="#Group-81"><span class="linenos"> 81</span></a>                 <span class="n">log_exceptions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Group-82"><a href="#Group-82"><span class="linenos"> 82</span></a>                 <span class="o">*</span><span class="p">,</span>
</span><span id="Group-83"><a href="#Group-83"><span class="linenos"> 83</span></a>                 <span class="n">loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">AbstractEventLoop</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="Group-84"><a href="#Group-84"><span class="linenos"> 84</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_log_exceptions</span> <span class="o">=</span> <span class="n">log_exceptions</span>
</span><span id="Group-85"><a href="#Group-85"><span class="linenos"> 85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span> <span class="o">=</span> <span class="n">loop</span> <span class="ow">or</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
</span><span id="Group-86"><a href="#Group-86"><span class="linenos"> 86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>
</span><span id="Group-87"><a href="#Group-87"><span class="linenos"> 87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>
</span><span id="Group-88"><a href="#Group-88"><span class="linenos"> 88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="Group-89"><a href="#Group-89"><span class="linenos"> 89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Group-90"><a href="#Group-90"><span class="linenos"> 90</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="Group-91"><a href="#Group-91"><span class="linenos"> 91</span></a>
</span><span id="Group-92"><a href="#Group-92"><span class="linenos"> 92</span></a>    <span class="nd">@property</span>
</span><span id="Group-93"><a href="#Group-93"><span class="linenos"> 93</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">async_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Group-94"><a href="#Group-94"><span class="linenos"> 94</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Async group&quot;&quot;&quot;</span>
</span><span id="Group-95"><a href="#Group-95"><span class="linenos"> 95</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Group-96"><a href="#Group-96"><span class="linenos"> 96</span></a>
</span><span id="Group-97"><a href="#Group-97"><span class="linenos"> 97</span></a>    <span class="nd">@property</span>
</span><span id="Group-98"><a href="#Group-98"><span class="linenos"> 98</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_open</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Group-99"><a href="#Group-99"><span class="linenos"> 99</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;``True`` if group is not closing or closed, ``False`` otherwise.&quot;&quot;&quot;</span>
</span><span id="Group-100"><a href="#Group-100"><span class="linenos">100</span></a>        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>
</span><span id="Group-101"><a href="#Group-101"><span class="linenos">101</span></a>
</span><span id="Group-102"><a href="#Group-102"><span class="linenos">102</span></a>    <span class="nd">@property</span>
</span><span id="Group-103"><a href="#Group-103"><span class="linenos">103</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_closing</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Group-104"><a href="#Group-104"><span class="linenos">104</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Is group closing or closed.&quot;&quot;&quot;</span>
</span><span id="Group-105"><a href="#Group-105"><span class="linenos">105</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>
</span><span id="Group-106"><a href="#Group-106"><span class="linenos">106</span></a>
</span><span id="Group-107"><a href="#Group-107"><span class="linenos">107</span></a>    <span class="nd">@property</span>
</span><span id="Group-108"><a href="#Group-108"><span class="linenos">108</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Group-109"><a href="#Group-109"><span class="linenos">109</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Is group closed.&quot;&quot;&quot;</span>
</span><span id="Group-110"><a href="#Group-110"><span class="linenos">110</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>
</span><span id="Group-111"><a href="#Group-111"><span class="linenos">111</span></a>
</span><span id="Group-112"><a href="#Group-112"><span class="linenos">112</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_closing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Group-113"><a href="#Group-113"><span class="linenos">113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait until closing is ``True``.&quot;&quot;&quot;</span>
</span><span id="Group-114"><a href="#Group-114"><span class="linenos">114</span></a>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">shield</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="p">)</span>
</span><span id="Group-115"><a href="#Group-115"><span class="linenos">115</span></a>
</span><span id="Group-116"><a href="#Group-116"><span class="linenos">116</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Group-117"><a href="#Group-117"><span class="linenos">117</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait until closed is ``True``.&quot;&quot;&quot;</span>
</span><span id="Group-118"><a href="#Group-118"><span class="linenos">118</span></a>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">shield</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">)</span>
</span><span id="Group-119"><a href="#Group-119"><span class="linenos">119</span></a>
</span><span id="Group-120"><a href="#Group-120"><span class="linenos">120</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_subgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Group-121"><a href="#Group-121"><span class="linenos">121</span></a>                        <span class="n">log_exceptions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Group-122"><a href="#Group-122"><span class="linenos">122</span></a>                        <span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Group&#39;</span><span class="p">:</span>
</span><span id="Group-123"><a href="#Group-123"><span class="linenos">123</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create new Group as a child of this Group. Return the new Group.</span>
</span><span id="Group-124"><a href="#Group-124"><span class="linenos">124</span></a>
</span><span id="Group-125"><a href="#Group-125"><span class="linenos">125</span></a><span class="sd">        When a parent Group gets closed, all of its children are closed.</span>
</span><span id="Group-126"><a href="#Group-126"><span class="linenos">126</span></a><span class="sd">        Closing of a subgroup has no effect on the parent Group.</span>
</span><span id="Group-127"><a href="#Group-127"><span class="linenos">127</span></a>
</span><span id="Group-128"><a href="#Group-128"><span class="linenos">128</span></a><span class="sd">        If `log_exceptions` is ``None``, subgroup inherits `log_exceptions`</span>
</span><span id="Group-129"><a href="#Group-129"><span class="linenos">129</span></a><span class="sd">        from its parent.</span>
</span><span id="Group-130"><a href="#Group-130"><span class="linenos">130</span></a>
</span><span id="Group-131"><a href="#Group-131"><span class="linenos">131</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Group-132"><a href="#Group-132"><span class="linenos">132</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="Group-133"><a href="#Group-133"><span class="linenos">133</span></a>            <span class="k">raise</span> <span class="n">GroupClosedError</span><span class="p">(</span><span class="s2">&quot;can&#39;t create subgroup of closed group&quot;</span><span class="p">)</span>
</span><span id="Group-134"><a href="#Group-134"><span class="linenos">134</span></a>
</span><span id="Group-135"><a href="#Group-135"><span class="linenos">135</span></a>        <span class="n">child</span> <span class="o">=</span> <span class="n">Group</span><span class="p">(</span>
</span><span id="Group-136"><a href="#Group-136"><span class="linenos">136</span></a>            <span class="n">log_exceptions</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_exceptions</span> <span class="k">if</span> <span class="n">log_exceptions</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="Group-137"><a href="#Group-137"><span class="linenos">137</span></a>                            <span class="k">else</span> <span class="n">log_exceptions</span><span class="p">),</span>
</span><span id="Group-138"><a href="#Group-138"><span class="linenos">138</span></a>            <span class="n">loop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="p">)</span>
</span><span id="Group-139"><a href="#Group-139"><span class="linenos">139</span></a>        <span class="n">child</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="Group-140"><a href="#Group-140"><span class="linenos">140</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
</span><span id="Group-141"><a href="#Group-141"><span class="linenos">141</span></a>        <span class="k">return</span> <span class="n">child</span>
</span><span id="Group-142"><a href="#Group-142"><span class="linenos">142</span></a>
</span><span id="Group-143"><a href="#Group-143"><span class="linenos">143</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">wrap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Group-144"><a href="#Group-144"><span class="linenos">144</span></a>             <span class="n">obj</span><span class="p">:</span> <span class="n">Awaitable</span>
</span><span id="Group-145"><a href="#Group-145"><span class="linenos">145</span></a>             <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">:</span>
</span><span id="Group-146"><a href="#Group-146"><span class="linenos">146</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wrap the awaitable object into a Task and schedule its execution.</span>
</span><span id="Group-147"><a href="#Group-147"><span class="linenos">147</span></a><span class="sd">        Return the Task object.</span>
</span><span id="Group-148"><a href="#Group-148"><span class="linenos">148</span></a>
</span><span id="Group-149"><a href="#Group-149"><span class="linenos">149</span></a><span class="sd">        Resulting task is shielded and can be canceled only with</span>
</span><span id="Group-150"><a href="#Group-150"><span class="linenos">150</span></a><span class="sd">        `Group.close`.</span>
</span><span id="Group-151"><a href="#Group-151"><span class="linenos">151</span></a>
</span><span id="Group-152"><a href="#Group-152"><span class="linenos">152</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Group-153"><a href="#Group-153"><span class="linenos">153</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="Group-154"><a href="#Group-154"><span class="linenos">154</span></a>            <span class="k">raise</span> <span class="n">GroupClosedError</span><span class="p">(</span><span class="s2">&quot;can&#39;t wrap object in closed group&quot;</span><span class="p">)</span>
</span><span id="Group-155"><a href="#Group-155"><span class="linenos">155</span></a>
</span><span id="Group-156"><a href="#Group-156"><span class="linenos">156</span></a>        <span class="k">if</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">iscoroutine</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
</span><span id="Group-157"><a href="#Group-157"><span class="linenos">157</span></a>            <span class="n">task</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</span><span id="Group-158"><a href="#Group-158"><span class="linenos">158</span></a>
</span><span id="Group-159"><a href="#Group-159"><span class="linenos">159</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Group-160"><a href="#Group-160"><span class="linenos">160</span></a>            <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="p">)</span>
</span><span id="Group-161"><a href="#Group-161"><span class="linenos">161</span></a>
</span><span id="Group-162"><a href="#Group-162"><span class="linenos">162</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
</span><span id="Group-163"><a href="#Group-163"><span class="linenos">163</span></a>        <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_on_task_done</span><span class="p">)</span>
</span><span id="Group-164"><a href="#Group-164"><span class="linenos">164</span></a>
</span><span id="Group-165"><a href="#Group-165"><span class="linenos">165</span></a>        <span class="k">return</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">shield</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
</span><span id="Group-166"><a href="#Group-166"><span class="linenos">166</span></a>
</span><span id="Group-167"><a href="#Group-167"><span class="linenos">167</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">spawn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Group-168"><a href="#Group-168"><span class="linenos">168</span></a>              <span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">],</span>
</span><span id="Group-169"><a href="#Group-169"><span class="linenos">169</span></a>              <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="Group-170"><a href="#Group-170"><span class="linenos">170</span></a>              <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">:</span>
</span><span id="Group-171"><a href="#Group-171"><span class="linenos">171</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wrap the result of a `fn` into a Task and schedule its execution.</span>
</span><span id="Group-172"><a href="#Group-172"><span class="linenos">172</span></a><span class="sd">        Return the Task object.</span>
</span><span id="Group-173"><a href="#Group-173"><span class="linenos">173</span></a>
</span><span id="Group-174"><a href="#Group-174"><span class="linenos">174</span></a><span class="sd">        Function `fn` is called with provided `args` and `kwargs`.</span>
</span><span id="Group-175"><a href="#Group-175"><span class="linenos">175</span></a><span class="sd">        Resulting Task is shielded and can be canceled only with</span>
</span><span id="Group-176"><a href="#Group-176"><span class="linenos">176</span></a><span class="sd">        `Group.close`.</span>
</span><span id="Group-177"><a href="#Group-177"><span class="linenos">177</span></a>
</span><span id="Group-178"><a href="#Group-178"><span class="linenos">178</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Group-179"><a href="#Group-179"><span class="linenos">179</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="Group-180"><a href="#Group-180"><span class="linenos">180</span></a>            <span class="k">raise</span> <span class="n">GroupClosedError</span><span class="p">(</span><span class="s2">&quot;can&#39;t spawn task in closed group&quot;</span><span class="p">)</span>
</span><span id="Group-181"><a href="#Group-181"><span class="linenos">181</span></a>
</span><span id="Group-182"><a href="#Group-182"><span class="linenos">182</span></a>        <span class="n">future</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Group-183"><a href="#Group-183"><span class="linenos">183</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">future</span><span class="p">)</span>
</span><span id="Group-184"><a href="#Group-184"><span class="linenos">184</span></a>
</span><span id="Group-185"><a href="#Group-185"><span class="linenos">185</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Group-186"><a href="#Group-186"><span class="linenos">186</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schedule Group closing.</span>
</span><span id="Group-187"><a href="#Group-187"><span class="linenos">187</span></a>
</span><span id="Group-188"><a href="#Group-188"><span class="linenos">188</span></a><span class="sd">        Closing Future is set immediately. All subgroups are closed, and all</span>
</span><span id="Group-189"><a href="#Group-189"><span class="linenos">189</span></a><span class="sd">        running tasks are canceled. Once closing of all subgroups</span>
</span><span id="Group-190"><a href="#Group-190"><span class="linenos">190</span></a><span class="sd">        and execution of all tasks is completed, closed Future is set.</span>
</span><span id="Group-191"><a href="#Group-191"><span class="linenos">191</span></a>
</span><span id="Group-192"><a href="#Group-192"><span class="linenos">192</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Group-193"><a href="#Group-193"><span class="linenos">193</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="Group-194"><a href="#Group-194"><span class="linenos">194</span></a>            <span class="k">return</span>
</span><span id="Group-195"><a href="#Group-195"><span class="linenos">195</span></a>
</span><span id="Group-196"><a href="#Group-196"><span class="linenos">196</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Group-197"><a href="#Group-197"><span class="linenos">197</span></a>
</span><span id="Group-198"><a href="#Group-198"><span class="linenos">198</span></a>        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">):</span>
</span><span id="Group-199"><a href="#Group-199"><span class="linenos">199</span></a>            <span class="n">child</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Group-200"><a href="#Group-200"><span class="linenos">200</span></a>
</span><span id="Group-201"><a href="#Group-201"><span class="linenos">201</span></a>        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span><span class="p">:</span>
</span><span id="Group-202"><a href="#Group-202"><span class="linenos">202</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">)</span>
</span><span id="Group-203"><a href="#Group-203"><span class="linenos">203</span></a>
</span><span id="Group-204"><a href="#Group-204"><span class="linenos">204</span></a>        <span class="n">futures</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span><span class="p">,</span>
</span><span id="Group-205"><a href="#Group-205"><span class="linenos">205</span></a>                   <span class="o">*</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">_closed</span> <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">)]</span>
</span><span id="Group-206"><a href="#Group-206"><span class="linenos">206</span></a>        <span class="k">if</span> <span class="n">futures</span><span class="p">:</span>
</span><span id="Group-207"><a href="#Group-207"><span class="linenos">207</span></a>            <span class="n">waiting_task</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">futures</span><span class="p">))</span>
</span><span id="Group-208"><a href="#Group-208"><span class="linenos">208</span></a>            <span class="n">waiting_task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_closed</span><span class="p">())</span>
</span><span id="Group-209"><a href="#Group-209"><span class="linenos">209</span></a>
</span><span id="Group-210"><a href="#Group-210"><span class="linenos">210</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Group-211"><a href="#Group-211"><span class="linenos">211</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_on_closed</span><span class="p">()</span>
</span><span id="Group-212"><a href="#Group-212"><span class="linenos">212</span></a>
</span><span id="Group-213"><a href="#Group-213"><span class="linenos">213</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Group-214"><a href="#Group-214"><span class="linenos">214</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Close Group and wait until closed is ``True``.&quot;&quot;&quot;</span>
</span><span id="Group-215"><a href="#Group-215"><span class="linenos">215</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Group-216"><a href="#Group-216"><span class="linenos">216</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_closed</span><span class="p">()</span>
</span><span id="Group-217"><a href="#Group-217"><span class="linenos">217</span></a>
</span><span id="Group-218"><a href="#Group-218"><span class="linenos">218</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Group-219"><a href="#Group-219"><span class="linenos">219</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Group-220"><a href="#Group-220"><span class="linenos">220</span></a>
</span><span id="Group-221"><a href="#Group-221"><span class="linenos">221</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aexit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
</span><span id="Group-222"><a href="#Group-222"><span class="linenos">222</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_close</span><span class="p">()</span>
</span><span id="Group-223"><a href="#Group-223"><span class="linenos">223</span></a>
</span><span id="Group-224"><a href="#Group-224"><span class="linenos">224</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_on_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Group-225"><a href="#Group-225"><span class="linenos">225</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Group-226"><a href="#Group-226"><span class="linenos">226</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Group-227"><a href="#Group-227"><span class="linenos">227</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Group-228"><a href="#Group-228"><span class="linenos">228</span></a>
</span><span id="Group-229"><a href="#Group-229"><span class="linenos">229</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Group-230"><a href="#Group-230"><span class="linenos">230</span></a>
</span><span id="Group-231"><a href="#Group-231"><span class="linenos">231</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_on_task_done</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">):</span>
</span><span id="Group-232"><a href="#Group-232"><span class="linenos">232</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
</span><span id="Group-233"><a href="#Group-233"><span class="linenos">233</span></a>
</span><span id="Group-234"><a href="#Group-234"><span class="linenos">234</span></a>        <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">cancelled</span><span class="p">():</span>
</span><span id="Group-235"><a href="#Group-235"><span class="linenos">235</span></a>            <span class="k">return</span>
</span><span id="Group-236"><a href="#Group-236"><span class="linenos">236</span></a>
</span><span id="Group-237"><a href="#Group-237"><span class="linenos">237</span></a>        <span class="n">e</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">exception</span><span class="p">()</span>
</span><span id="Group-238"><a href="#Group-238"><span class="linenos">238</span></a>        <span class="k">if</span> <span class="n">e</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_log_exceptions</span><span class="p">:</span>
</span><span id="Group-239"><a href="#Group-239"><span class="linenos">239</span></a>            <span class="n">mlog</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;unhandled exception in async group: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>
</span><span id="Group-240"><a href="#Group-240"><span class="linenos">240</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;unhandled exception in async group&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Group of asyncio Tasks.</p>

<p>Group enables creation and management of related asyncio Tasks. The
Group ensures uninterrupted execution of Tasks and Task completion upon
Group closing.</p>

<p>Group can contain subgroups, which are independent Groups managed by the
parent Group.</p>

<p>If a Task raises exception, other Tasks continue to execute.</p>

<p>If <code>log_exceptions</code> is <code>True</code>, exceptions raised by spawned tasks are
logged with level ERROR.</p>
</div>


                            <div id="Group.__init__" class="classattr">
                                        <input id="Group.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Group</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">log_exceptions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">AbstractEventLoop</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Group.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group.__init__-80"><a href="#Group.__init__-80"><span class="linenos">80</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Group.__init__-81"><a href="#Group.__init__-81"><span class="linenos">81</span></a>                 <span class="n">log_exceptions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Group.__init__-82"><a href="#Group.__init__-82"><span class="linenos">82</span></a>                 <span class="o">*</span><span class="p">,</span>
</span><span id="Group.__init__-83"><a href="#Group.__init__-83"><span class="linenos">83</span></a>                 <span class="n">loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">AbstractEventLoop</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="Group.__init__-84"><a href="#Group.__init__-84"><span class="linenos">84</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_log_exceptions</span> <span class="o">=</span> <span class="n">log_exceptions</span>
</span><span id="Group.__init__-85"><a href="#Group.__init__-85"><span class="linenos">85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span> <span class="o">=</span> <span class="n">loop</span> <span class="ow">or</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
</span><span id="Group.__init__-86"><a href="#Group.__init__-86"><span class="linenos">86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>
</span><span id="Group.__init__-87"><a href="#Group.__init__-87"><span class="linenos">87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>
</span><span id="Group.__init__-88"><a href="#Group.__init__-88"><span class="linenos">88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="Group.__init__-89"><a href="#Group.__init__-89"><span class="linenos">89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Group.__init__-90"><a href="#Group.__init__-90"><span class="linenos">90</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Group.async_group" class="classattr">
                                        <input id="Group.async_group-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">async_group</span>

                <label class="view-source-button" for="Group.async_group-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group.async_group"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group.async_group-92"><a href="#Group.async_group-92"><span class="linenos">92</span></a>    <span class="nd">@property</span>
</span><span id="Group.async_group-93"><a href="#Group.async_group-93"><span class="linenos">93</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">async_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Group.async_group-94"><a href="#Group.async_group-94"><span class="linenos">94</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Async group&quot;&quot;&quot;</span>
</span><span id="Group.async_group-95"><a href="#Group.async_group-95"><span class="linenos">95</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Async group</p>
</div>


                            </div>
                            <div id="Group.is_open" class="classattr">
                                        <input id="Group.is_open-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">is_open</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Group.is_open-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group.is_open"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group.is_open-97"><a href="#Group.is_open-97"><span class="linenos"> 97</span></a>    <span class="nd">@property</span>
</span><span id="Group.is_open-98"><a href="#Group.is_open-98"><span class="linenos"> 98</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_open</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Group.is_open-99"><a href="#Group.is_open-99"><span class="linenos"> 99</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;``True`` if group is not closing or closed, ``False`` otherwise.&quot;&quot;&quot;</span>
</span><span id="Group.is_open-100"><a href="#Group.is_open-100"><span class="linenos">100</span></a>        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p><code>True</code> if group is not closing or closed, <code>False</code> otherwise.</p>
</div>


                            </div>
                            <div id="Group.is_closing" class="classattr">
                                        <input id="Group.is_closing-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">is_closing</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Group.is_closing-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group.is_closing"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group.is_closing-102"><a href="#Group.is_closing-102"><span class="linenos">102</span></a>    <span class="nd">@property</span>
</span><span id="Group.is_closing-103"><a href="#Group.is_closing-103"><span class="linenos">103</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_closing</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Group.is_closing-104"><a href="#Group.is_closing-104"><span class="linenos">104</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Is group closing or closed.&quot;&quot;&quot;</span>
</span><span id="Group.is_closing-105"><a href="#Group.is_closing-105"><span class="linenos">105</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Is group closing or closed.</p>
</div>


                            </div>
                            <div id="Group.is_closed" class="classattr">
                                        <input id="Group.is_closed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">is_closed</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Group.is_closed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group.is_closed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group.is_closed-107"><a href="#Group.is_closed-107"><span class="linenos">107</span></a>    <span class="nd">@property</span>
</span><span id="Group.is_closed-108"><a href="#Group.is_closed-108"><span class="linenos">108</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Group.is_closed-109"><a href="#Group.is_closed-109"><span class="linenos">109</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Is group closed.&quot;&quot;&quot;</span>
</span><span id="Group.is_closed-110"><a href="#Group.is_closed-110"><span class="linenos">110</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Is group closed.</p>
</div>


                            </div>
                            <div id="Group.wait_closing" class="classattr">
                                        <input id="Group.wait_closing-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">wait_closing</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Group.wait_closing-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group.wait_closing"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group.wait_closing-112"><a href="#Group.wait_closing-112"><span class="linenos">112</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_closing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Group.wait_closing-113"><a href="#Group.wait_closing-113"><span class="linenos">113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait until closing is ``True``.&quot;&quot;&quot;</span>
</span><span id="Group.wait_closing-114"><a href="#Group.wait_closing-114"><span class="linenos">114</span></a>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">shield</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Wait until closing is <code>True</code>.</p>
</div>


                            </div>
                            <div id="Group.wait_closed" class="classattr">
                                        <input id="Group.wait_closed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">wait_closed</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Group.wait_closed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group.wait_closed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group.wait_closed-116"><a href="#Group.wait_closed-116"><span class="linenos">116</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Group.wait_closed-117"><a href="#Group.wait_closed-117"><span class="linenos">117</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait until closed is ``True``.&quot;&quot;&quot;</span>
</span><span id="Group.wait_closed-118"><a href="#Group.wait_closed-118"><span class="linenos">118</span></a>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">shield</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Wait until closed is <code>True</code>.</p>
</div>


                            </div>
                            <div id="Group.create_subgroup" class="classattr">
                                        <input id="Group.create_subgroup-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_subgroup</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">log_exceptions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n"><a href="#Group">Group</a></span>:</span></span>

                <label class="view-source-button" for="Group.create_subgroup-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group.create_subgroup"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group.create_subgroup-120"><a href="#Group.create_subgroup-120"><span class="linenos">120</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_subgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Group.create_subgroup-121"><a href="#Group.create_subgroup-121"><span class="linenos">121</span></a>                        <span class="n">log_exceptions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Group.create_subgroup-122"><a href="#Group.create_subgroup-122"><span class="linenos">122</span></a>                        <span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Group&#39;</span><span class="p">:</span>
</span><span id="Group.create_subgroup-123"><a href="#Group.create_subgroup-123"><span class="linenos">123</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create new Group as a child of this Group. Return the new Group.</span>
</span><span id="Group.create_subgroup-124"><a href="#Group.create_subgroup-124"><span class="linenos">124</span></a>
</span><span id="Group.create_subgroup-125"><a href="#Group.create_subgroup-125"><span class="linenos">125</span></a><span class="sd">        When a parent Group gets closed, all of its children are closed.</span>
</span><span id="Group.create_subgroup-126"><a href="#Group.create_subgroup-126"><span class="linenos">126</span></a><span class="sd">        Closing of a subgroup has no effect on the parent Group.</span>
</span><span id="Group.create_subgroup-127"><a href="#Group.create_subgroup-127"><span class="linenos">127</span></a>
</span><span id="Group.create_subgroup-128"><a href="#Group.create_subgroup-128"><span class="linenos">128</span></a><span class="sd">        If `log_exceptions` is ``None``, subgroup inherits `log_exceptions`</span>
</span><span id="Group.create_subgroup-129"><a href="#Group.create_subgroup-129"><span class="linenos">129</span></a><span class="sd">        from its parent.</span>
</span><span id="Group.create_subgroup-130"><a href="#Group.create_subgroup-130"><span class="linenos">130</span></a>
</span><span id="Group.create_subgroup-131"><a href="#Group.create_subgroup-131"><span class="linenos">131</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Group.create_subgroup-132"><a href="#Group.create_subgroup-132"><span class="linenos">132</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="Group.create_subgroup-133"><a href="#Group.create_subgroup-133"><span class="linenos">133</span></a>            <span class="k">raise</span> <span class="n">GroupClosedError</span><span class="p">(</span><span class="s2">&quot;can&#39;t create subgroup of closed group&quot;</span><span class="p">)</span>
</span><span id="Group.create_subgroup-134"><a href="#Group.create_subgroup-134"><span class="linenos">134</span></a>
</span><span id="Group.create_subgroup-135"><a href="#Group.create_subgroup-135"><span class="linenos">135</span></a>        <span class="n">child</span> <span class="o">=</span> <span class="n">Group</span><span class="p">(</span>
</span><span id="Group.create_subgroup-136"><a href="#Group.create_subgroup-136"><span class="linenos">136</span></a>            <span class="n">log_exceptions</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_log_exceptions</span> <span class="k">if</span> <span class="n">log_exceptions</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="Group.create_subgroup-137"><a href="#Group.create_subgroup-137"><span class="linenos">137</span></a>                            <span class="k">else</span> <span class="n">log_exceptions</span><span class="p">),</span>
</span><span id="Group.create_subgroup-138"><a href="#Group.create_subgroup-138"><span class="linenos">138</span></a>            <span class="n">loop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="p">)</span>
</span><span id="Group.create_subgroup-139"><a href="#Group.create_subgroup-139"><span class="linenos">139</span></a>        <span class="n">child</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="Group.create_subgroup-140"><a href="#Group.create_subgroup-140"><span class="linenos">140</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
</span><span id="Group.create_subgroup-141"><a href="#Group.create_subgroup-141"><span class="linenos">141</span></a>        <span class="k">return</span> <span class="n">child</span>
</span></pre></div>


            <div class="docstring"><p>Create new Group as a child of this Group. Return the new Group.</p>

<p>When a parent Group gets closed, all of its children are closed.
Closing of a subgroup has no effect on the parent Group.</p>

<p>If <code>log_exceptions</code> is <code>None</code>, subgroup inherits <code>log_exceptions</code>
from its parent.</p>
</div>


                            </div>
                            <div id="Group.wrap" class="classattr">
                                        <input id="Group.wrap-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">wrap</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">obj</span><span class="p">:</span> <span class="n">Awaitable</span></span><span class="return-annotation">) -> <span class="n">_asyncio</span><span class="o">.</span><span class="n">Task</span>:</span></span>

                <label class="view-source-button" for="Group.wrap-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group.wrap"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group.wrap-143"><a href="#Group.wrap-143"><span class="linenos">143</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">wrap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Group.wrap-144"><a href="#Group.wrap-144"><span class="linenos">144</span></a>             <span class="n">obj</span><span class="p">:</span> <span class="n">Awaitable</span>
</span><span id="Group.wrap-145"><a href="#Group.wrap-145"><span class="linenos">145</span></a>             <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">:</span>
</span><span id="Group.wrap-146"><a href="#Group.wrap-146"><span class="linenos">146</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wrap the awaitable object into a Task and schedule its execution.</span>
</span><span id="Group.wrap-147"><a href="#Group.wrap-147"><span class="linenos">147</span></a><span class="sd">        Return the Task object.</span>
</span><span id="Group.wrap-148"><a href="#Group.wrap-148"><span class="linenos">148</span></a>
</span><span id="Group.wrap-149"><a href="#Group.wrap-149"><span class="linenos">149</span></a><span class="sd">        Resulting task is shielded and can be canceled only with</span>
</span><span id="Group.wrap-150"><a href="#Group.wrap-150"><span class="linenos">150</span></a><span class="sd">        `Group.close`.</span>
</span><span id="Group.wrap-151"><a href="#Group.wrap-151"><span class="linenos">151</span></a>
</span><span id="Group.wrap-152"><a href="#Group.wrap-152"><span class="linenos">152</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Group.wrap-153"><a href="#Group.wrap-153"><span class="linenos">153</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="Group.wrap-154"><a href="#Group.wrap-154"><span class="linenos">154</span></a>            <span class="k">raise</span> <span class="n">GroupClosedError</span><span class="p">(</span><span class="s2">&quot;can&#39;t wrap object in closed group&quot;</span><span class="p">)</span>
</span><span id="Group.wrap-155"><a href="#Group.wrap-155"><span class="linenos">155</span></a>
</span><span id="Group.wrap-156"><a href="#Group.wrap-156"><span class="linenos">156</span></a>        <span class="k">if</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">iscoroutine</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
</span><span id="Group.wrap-157"><a href="#Group.wrap-157"><span class="linenos">157</span></a>            <span class="n">task</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</span><span id="Group.wrap-158"><a href="#Group.wrap-158"><span class="linenos">158</span></a>
</span><span id="Group.wrap-159"><a href="#Group.wrap-159"><span class="linenos">159</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Group.wrap-160"><a href="#Group.wrap-160"><span class="linenos">160</span></a>            <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="p">)</span>
</span><span id="Group.wrap-161"><a href="#Group.wrap-161"><span class="linenos">161</span></a>
</span><span id="Group.wrap-162"><a href="#Group.wrap-162"><span class="linenos">162</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
</span><span id="Group.wrap-163"><a href="#Group.wrap-163"><span class="linenos">163</span></a>        <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_on_task_done</span><span class="p">)</span>
</span><span id="Group.wrap-164"><a href="#Group.wrap-164"><span class="linenos">164</span></a>
</span><span id="Group.wrap-165"><a href="#Group.wrap-165"><span class="linenos">165</span></a>        <span class="k">return</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">shield</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Wrap the awaitable object into a Task and schedule its execution.
Return the Task object.</p>

<p>Resulting task is shielded and can be canceled only with
<code><a href="#Group.close">Group.close</a></code>.</p>
</div>


                            </div>
                            <div id="Group.spawn" class="classattr">
                                        <input id="Group.spawn-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">spawn</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">]</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">_asyncio</span><span class="o">.</span><span class="n">Task</span>:</span></span>

                <label class="view-source-button" for="Group.spawn-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group.spawn"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group.spawn-167"><a href="#Group.spawn-167"><span class="linenos">167</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">spawn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Group.spawn-168"><a href="#Group.spawn-168"><span class="linenos">168</span></a>              <span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">],</span>
</span><span id="Group.spawn-169"><a href="#Group.spawn-169"><span class="linenos">169</span></a>              <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="Group.spawn-170"><a href="#Group.spawn-170"><span class="linenos">170</span></a>              <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">:</span>
</span><span id="Group.spawn-171"><a href="#Group.spawn-171"><span class="linenos">171</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wrap the result of a `fn` into a Task and schedule its execution.</span>
</span><span id="Group.spawn-172"><a href="#Group.spawn-172"><span class="linenos">172</span></a><span class="sd">        Return the Task object.</span>
</span><span id="Group.spawn-173"><a href="#Group.spawn-173"><span class="linenos">173</span></a>
</span><span id="Group.spawn-174"><a href="#Group.spawn-174"><span class="linenos">174</span></a><span class="sd">        Function `fn` is called with provided `args` and `kwargs`.</span>
</span><span id="Group.spawn-175"><a href="#Group.spawn-175"><span class="linenos">175</span></a><span class="sd">        Resulting Task is shielded and can be canceled only with</span>
</span><span id="Group.spawn-176"><a href="#Group.spawn-176"><span class="linenos">176</span></a><span class="sd">        `Group.close`.</span>
</span><span id="Group.spawn-177"><a href="#Group.spawn-177"><span class="linenos">177</span></a>
</span><span id="Group.spawn-178"><a href="#Group.spawn-178"><span class="linenos">178</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Group.spawn-179"><a href="#Group.spawn-179"><span class="linenos">179</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="Group.spawn-180"><a href="#Group.spawn-180"><span class="linenos">180</span></a>            <span class="k">raise</span> <span class="n">GroupClosedError</span><span class="p">(</span><span class="s2">&quot;can&#39;t spawn task in closed group&quot;</span><span class="p">)</span>
</span><span id="Group.spawn-181"><a href="#Group.spawn-181"><span class="linenos">181</span></a>
</span><span id="Group.spawn-182"><a href="#Group.spawn-182"><span class="linenos">182</span></a>        <span class="n">future</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Group.spawn-183"><a href="#Group.spawn-183"><span class="linenos">183</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">future</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Wrap the result of a <code>fn</code> into a Task and schedule its execution.
Return the Task object.</p>

<p>Function <code>fn</code> is called with provided <code>args</code> and <code>kwargs</code>.
Resulting Task is shielded and can be canceled only with
<code><a href="#Group.close">Group.close</a></code>.</p>
</div>


                            </div>
                            <div id="Group.close" class="classattr">
                                        <input id="Group.close-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">close</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Group.close-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group.close"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group.close-185"><a href="#Group.close-185"><span class="linenos">185</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Group.close-186"><a href="#Group.close-186"><span class="linenos">186</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schedule Group closing.</span>
</span><span id="Group.close-187"><a href="#Group.close-187"><span class="linenos">187</span></a>
</span><span id="Group.close-188"><a href="#Group.close-188"><span class="linenos">188</span></a><span class="sd">        Closing Future is set immediately. All subgroups are closed, and all</span>
</span><span id="Group.close-189"><a href="#Group.close-189"><span class="linenos">189</span></a><span class="sd">        running tasks are canceled. Once closing of all subgroups</span>
</span><span id="Group.close-190"><a href="#Group.close-190"><span class="linenos">190</span></a><span class="sd">        and execution of all tasks is completed, closed Future is set.</span>
</span><span id="Group.close-191"><a href="#Group.close-191"><span class="linenos">191</span></a>
</span><span id="Group.close-192"><a href="#Group.close-192"><span class="linenos">192</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Group.close-193"><a href="#Group.close-193"><span class="linenos">193</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="Group.close-194"><a href="#Group.close-194"><span class="linenos">194</span></a>            <span class="k">return</span>
</span><span id="Group.close-195"><a href="#Group.close-195"><span class="linenos">195</span></a>
</span><span id="Group.close-196"><a href="#Group.close-196"><span class="linenos">196</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_closing</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Group.close-197"><a href="#Group.close-197"><span class="linenos">197</span></a>
</span><span id="Group.close-198"><a href="#Group.close-198"><span class="linenos">198</span></a>        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">):</span>
</span><span id="Group.close-199"><a href="#Group.close-199"><span class="linenos">199</span></a>            <span class="n">child</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Group.close-200"><a href="#Group.close-200"><span class="linenos">200</span></a>
</span><span id="Group.close-201"><a href="#Group.close-201"><span class="linenos">201</span></a>        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span><span class="p">:</span>
</span><span id="Group.close-202"><a href="#Group.close-202"><span class="linenos">202</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">)</span>
</span><span id="Group.close-203"><a href="#Group.close-203"><span class="linenos">203</span></a>
</span><span id="Group.close-204"><a href="#Group.close-204"><span class="linenos">204</span></a>        <span class="n">futures</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_tasks</span><span class="p">,</span>
</span><span id="Group.close-205"><a href="#Group.close-205"><span class="linenos">205</span></a>                   <span class="o">*</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">_closed</span> <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">)]</span>
</span><span id="Group.close-206"><a href="#Group.close-206"><span class="linenos">206</span></a>        <span class="k">if</span> <span class="n">futures</span><span class="p">:</span>
</span><span id="Group.close-207"><a href="#Group.close-207"><span class="linenos">207</span></a>            <span class="n">waiting_task</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">futures</span><span class="p">))</span>
</span><span id="Group.close-208"><a href="#Group.close-208"><span class="linenos">208</span></a>            <span class="n">waiting_task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_closed</span><span class="p">())</span>
</span><span id="Group.close-209"><a href="#Group.close-209"><span class="linenos">209</span></a>
</span><span id="Group.close-210"><a href="#Group.close-210"><span class="linenos">210</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Group.close-211"><a href="#Group.close-211"><span class="linenos">211</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_on_closed</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Schedule Group closing.</p>

<p>Closing Future is set immediately. All subgroups are closed, and all
running tasks are canceled. Once closing of all subgroups
and execution of all tasks is completed, closed Future is set.</p>
</div>


                            </div>
                            <div id="Group.async_close" class="classattr">
                                        <input id="Group.async_close-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">async_close</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Group.async_close-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Group.async_close"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Group.async_close-213"><a href="#Group.async_close-213"><span class="linenos">213</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Group.async_close-214"><a href="#Group.async_close-214"><span class="linenos">214</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Close Group and wait until closed is ``True``.&quot;&quot;&quot;</span>
</span><span id="Group.async_close-215"><a href="#Group.async_close-215"><span class="linenos">215</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Group.async_close-216"><a href="#Group.async_close-216"><span class="linenos">216</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_closed</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Close Group and wait until closed is <code>True</code>.</p>
</div>


                            </div>
                </section>
                <section id="first">
                            <input id="first-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">first</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">xs</span><span class="p">:</span> <span class="n">AsyncIterable</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">]</span>,</span><span class="param">	<span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="o">~</span><span class="n">T</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">function</span> <span class="o">&lt;</span><span class="k">lambda</span><span class="o">&gt;&gt;</span>,</span><span class="param">	<span class="n">default</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="first-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#first"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="first-14"><a href="#first-14"><span class="linenos">14</span></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">first</span><span class="p">(</span><span class="n">xs</span><span class="p">:</span> <span class="n">AsyncIterable</span><span class="p">[</span><span class="n">T</span><span class="p">],</span>
</span><span id="first-15"><a href="#first-15"><span class="linenos">15</span></a>                <span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">T</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="first-16"><a href="#first-16"><span class="linenos">16</span></a>                <span class="n">default</span><span class="p">:</span> <span class="n">T</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="first-17"><a href="#first-17"><span class="linenos">17</span></a>                <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="first-18"><a href="#first-18"><span class="linenos">18</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the first element from async iterable that satisfies</span>
</span><span id="first-19"><a href="#first-19"><span class="linenos">19</span></a><span class="sd">    predicate `fn`, or `default` if no such element exists.</span>
</span><span id="first-20"><a href="#first-20"><span class="linenos">20</span></a>
</span><span id="first-21"><a href="#first-21"><span class="linenos">21</span></a><span class="sd">    Result of predicate `fn` can be of any type. Predicate is satisfied if it&#39;s</span>
</span><span id="first-22"><a href="#first-22"><span class="linenos">22</span></a><span class="sd">    return value is truthy.</span>
</span><span id="first-23"><a href="#first-23"><span class="linenos">23</span></a>
</span><span id="first-24"><a href="#first-24"><span class="linenos">24</span></a><span class="sd">    Args:</span>
</span><span id="first-25"><a href="#first-25"><span class="linenos">25</span></a><span class="sd">        xs: async collection</span>
</span><span id="first-26"><a href="#first-26"><span class="linenos">26</span></a><span class="sd">        fn: predicate</span>
</span><span id="first-27"><a href="#first-27"><span class="linenos">27</span></a><span class="sd">        default: default value</span>
</span><span id="first-28"><a href="#first-28"><span class="linenos">28</span></a>
</span><span id="first-29"><a href="#first-29"><span class="linenos">29</span></a><span class="sd">    Example::</span>
</span><span id="first-30"><a href="#first-30"><span class="linenos">30</span></a>
</span><span id="first-31"><a href="#first-31"><span class="linenos">31</span></a><span class="sd">        async def async_range(x):</span>
</span><span id="first-32"><a href="#first-32"><span class="linenos">32</span></a><span class="sd">            for i in range(x):</span>
</span><span id="first-33"><a href="#first-33"><span class="linenos">33</span></a><span class="sd">                await asyncio.sleep(0)</span>
</span><span id="first-34"><a href="#first-34"><span class="linenos">34</span></a><span class="sd">                yield i</span>
</span><span id="first-35"><a href="#first-35"><span class="linenos">35</span></a>
</span><span id="first-36"><a href="#first-36"><span class="linenos">36</span></a><span class="sd">        assert await first(async_range(3)) == 0</span>
</span><span id="first-37"><a href="#first-37"><span class="linenos">37</span></a><span class="sd">        assert await first(async_range(3), lambda x: x &gt; 1) == 2</span>
</span><span id="first-38"><a href="#first-38"><span class="linenos">38</span></a><span class="sd">        assert await first(async_range(3), lambda x: x &gt; 2) is None</span>
</span><span id="first-39"><a href="#first-39"><span class="linenos">39</span></a><span class="sd">        assert await first(async_range(3), lambda x: x &gt; 2, 123) == 123</span>
</span><span id="first-40"><a href="#first-40"><span class="linenos">40</span></a>
</span><span id="first-41"><a href="#first-41"><span class="linenos">41</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="first-42"><a href="#first-42"><span class="linenos">42</span></a>    <span class="k">async</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xs</span><span class="p">:</span>
</span><span id="first-43"><a href="#first-43"><span class="linenos">43</span></a>        <span class="k">if</span> <span class="n">fn</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
</span><span id="first-44"><a href="#first-44"><span class="linenos">44</span></a>            <span class="k">return</span> <span class="n">i</span>
</span><span id="first-45"><a href="#first-45"><span class="linenos">45</span></a>
</span><span id="first-46"><a href="#first-46"><span class="linenos">46</span></a>    <span class="k">return</span> <span class="n">default</span>
</span></pre></div>


            <div class="docstring"><p>Return the first element from async iterable that satisfies
predicate <code>fn</code>, or <code>default</code> if no such element exists.</p>

<p>Result of predicate <code>fn</code> can be of any type. Predicate is satisfied if it's
return value is truthy.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>xs:</strong>  async collection</li>
<li><strong>fn:</strong>  predicate</li>
<li><strong>default:</strong>  default value</li>
</ul>

<p>Example::</p>

<pre><code>async def async_range(x):
    for i in range(x):
        await asyncio.sleep(0)
        yield i

assert await first(async_range(3)) == 0
assert await first(async_range(3), lambda x: x &gt; 1) == 2
assert await first(async_range(3), lambda x: x &gt; 2) is None
assert await first(async_range(3), lambda x: x &gt; 2, 123) == 123
</code></pre>
</div>


                </section>
                <section id="uncancellable">
                            <input id="uncancellable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">uncancellable</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">obj</span><span class="p">:</span> <span class="n">Awaitable</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">]</span>, </span><span class="param"><span class="n">raise_cancel</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="o">~</span><span class="n">T</span>:</span></span>

                <label class="view-source-button" for="uncancellable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#uncancellable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="uncancellable-49"><a href="#uncancellable-49"><span class="linenos">49</span></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">uncancellable</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">T</span><span class="p">],</span>
</span><span id="uncancellable-50"><a href="#uncancellable-50"><span class="linenos">50</span></a>                        <span class="n">raise_cancel</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="uncancellable-51"><a href="#uncancellable-51"><span class="linenos">51</span></a>                        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="uncancellable-52"><a href="#uncancellable-52"><span class="linenos">52</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Uncancellable execution of a awaitable object.</span>
</span><span id="uncancellable-53"><a href="#uncancellable-53"><span class="linenos">53</span></a>
</span><span id="uncancellable-54"><a href="#uncancellable-54"><span class="linenos">54</span></a><span class="sd">    Object is scheduled as task, shielded and its execution cannot be</span>
</span><span id="uncancellable-55"><a href="#uncancellable-55"><span class="linenos">55</span></a><span class="sd">    interrupted.</span>
</span><span id="uncancellable-56"><a href="#uncancellable-56"><span class="linenos">56</span></a>
</span><span id="uncancellable-57"><a href="#uncancellable-57"><span class="linenos">57</span></a><span class="sd">    If `raise_cancel` is `True` and the object gets canceled,</span>
</span><span id="uncancellable-58"><a href="#uncancellable-58"><span class="linenos">58</span></a><span class="sd">    `asyncio.CancelledError` is reraised after the Future finishes.</span>
</span><span id="uncancellable-59"><a href="#uncancellable-59"><span class="linenos">59</span></a>
</span><span id="uncancellable-60"><a href="#uncancellable-60"><span class="linenos">60</span></a><span class="sd">    Warning:</span>
</span><span id="uncancellable-61"><a href="#uncancellable-61"><span class="linenos">61</span></a><span class="sd">        If `raise_cancel` is `False`, this method suppresses</span>
</span><span id="uncancellable-62"><a href="#uncancellable-62"><span class="linenos">62</span></a><span class="sd">        `asyncio.CancelledError` and stops its propagation. Use with</span>
</span><span id="uncancellable-63"><a href="#uncancellable-63"><span class="linenos">63</span></a><span class="sd">        caution.</span>
</span><span id="uncancellable-64"><a href="#uncancellable-64"><span class="linenos">64</span></a>
</span><span id="uncancellable-65"><a href="#uncancellable-65"><span class="linenos">65</span></a><span class="sd">    Args:</span>
</span><span id="uncancellable-66"><a href="#uncancellable-66"><span class="linenos">66</span></a><span class="sd">        obj: awaitable object</span>
</span><span id="uncancellable-67"><a href="#uncancellable-67"><span class="linenos">67</span></a><span class="sd">        raise_cancel: raise CancelledError flag</span>
</span><span id="uncancellable-68"><a href="#uncancellable-68"><span class="linenos">68</span></a>
</span><span id="uncancellable-69"><a href="#uncancellable-69"><span class="linenos">69</span></a><span class="sd">    Returns:</span>
</span><span id="uncancellable-70"><a href="#uncancellable-70"><span class="linenos">70</span></a><span class="sd">        object execution result</span>
</span><span id="uncancellable-71"><a href="#uncancellable-71"><span class="linenos">71</span></a>
</span><span id="uncancellable-72"><a href="#uncancellable-72"><span class="linenos">72</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="uncancellable-73"><a href="#uncancellable-73"><span class="linenos">73</span></a>    <span class="n">exception</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="uncancellable-74"><a href="#uncancellable-74"><span class="linenos">74</span></a>    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
</span><span id="uncancellable-75"><a href="#uncancellable-75"><span class="linenos">75</span></a>
</span><span id="uncancellable-76"><a href="#uncancellable-76"><span class="linenos">76</span></a>    <span class="k">if</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">iscoroutine</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
</span><span id="uncancellable-77"><a href="#uncancellable-77"><span class="linenos">77</span></a>        <span class="n">task</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</span><span id="uncancellable-78"><a href="#uncancellable-78"><span class="linenos">78</span></a>
</span><span id="uncancellable-79"><a href="#uncancellable-79"><span class="linenos">79</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="uncancellable-80"><a href="#uncancellable-80"><span class="linenos">80</span></a>        <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="n">loop</span><span class="p">)</span>
</span><span id="uncancellable-81"><a href="#uncancellable-81"><span class="linenos">81</span></a>
</span><span id="uncancellable-82"><a href="#uncancellable-82"><span class="linenos">82</span></a>    <span class="k">while</span> <span class="ow">not</span> <span class="n">task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="uncancellable-83"><a href="#uncancellable-83"><span class="linenos">83</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="uncancellable-84"><a href="#uncancellable-84"><span class="linenos">84</span></a>            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">shield</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
</span><span id="uncancellable-85"><a href="#uncancellable-85"><span class="linenos">85</span></a>
</span><span id="uncancellable-86"><a href="#uncancellable-86"><span class="linenos">86</span></a>        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="uncancellable-87"><a href="#uncancellable-87"><span class="linenos">87</span></a>            <span class="k">if</span> <span class="n">raise_cancel</span><span class="p">:</span>
</span><span id="uncancellable-88"><a href="#uncancellable-88"><span class="linenos">88</span></a>                <span class="n">exception</span> <span class="o">=</span> <span class="n">e</span>
</span><span id="uncancellable-89"><a href="#uncancellable-89"><span class="linenos">89</span></a>
</span><span id="uncancellable-90"><a href="#uncancellable-90"><span class="linenos">90</span></a>        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="uncancellable-91"><a href="#uncancellable-91"><span class="linenos">91</span></a>            <span class="k">pass</span>
</span><span id="uncancellable-92"><a href="#uncancellable-92"><span class="linenos">92</span></a>
</span><span id="uncancellable-93"><a href="#uncancellable-93"><span class="linenos">93</span></a>    <span class="k">if</span> <span class="n">exception</span><span class="p">:</span>
</span><span id="uncancellable-94"><a href="#uncancellable-94"><span class="linenos">94</span></a>        <span class="k">raise</span> <span class="n">exception</span>
</span><span id="uncancellable-95"><a href="#uncancellable-95"><span class="linenos">95</span></a>
</span><span id="uncancellable-96"><a href="#uncancellable-96"><span class="linenos">96</span></a>    <span class="k">return</span> <span class="n">task</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Uncancellable execution of a awaitable object.</p>

<p>Object is scheduled as task, shielded and its execution cannot be
interrupted.</p>

<p>If <code>raise_cancel</code> is <code>True</code> and the object gets canceled,
<code>asyncio.CancelledError</code> is reraised after the Future finishes.</p>

<h6 id="warning">Warning:</h6>

<blockquote>
  <p>If <code>raise_cancel</code> is <code>False</code>, this method suppresses
  <code>asyncio.CancelledError</code> and stops its propagation. Use with
  caution.</p>
</blockquote>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>obj:</strong>  awaitable object</li>
<li><strong>raise_cancel:</strong>  raise CancelledError flag</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>object execution result</p>
</blockquote>
</div>


                </section>
                <section id="AsyncCallable">
                    <div class="attr variable">
            <span class="name">AsyncCallable</span>        =
<span class="default_value">typing.Callable</span>

        
    </div>
    <a class="headerlink" href="#AsyncCallable"></a>
    
    

                </section>
                <section id="call">
                            <input id="call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">call</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">]]]</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="o">~</span><span class="n">T</span>:</span></span>

                <label class="view-source-button" for="call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="call-113"><a href="#call-113"><span class="linenos">113</span></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">call</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="n">AsyncCallable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">T</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="call-114"><a href="#call-114"><span class="linenos">114</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Call a function or a coroutine (or other callable object).</span>
</span><span id="call-115"><a href="#call-115"><span class="linenos">115</span></a>
</span><span id="call-116"><a href="#call-116"><span class="linenos">116</span></a><span class="sd">    Call the `fn` with `args` and `kwargs`. If result of this call is</span>
</span><span id="call-117"><a href="#call-117"><span class="linenos">117</span></a><span class="sd">    awaitable, it is awaited and returned. Otherwise, result is immediately</span>
</span><span id="call-118"><a href="#call-118"><span class="linenos">118</span></a><span class="sd">    returned.</span>
</span><span id="call-119"><a href="#call-119"><span class="linenos">119</span></a>
</span><span id="call-120"><a href="#call-120"><span class="linenos">120</span></a><span class="sd">    Args:</span>
</span><span id="call-121"><a href="#call-121"><span class="linenos">121</span></a><span class="sd">        fn: callable object</span>
</span><span id="call-122"><a href="#call-122"><span class="linenos">122</span></a><span class="sd">        args: additional positional arguments</span>
</span><span id="call-123"><a href="#call-123"><span class="linenos">123</span></a><span class="sd">        kwargs: additional keyword arguments</span>
</span><span id="call-124"><a href="#call-124"><span class="linenos">124</span></a>
</span><span id="call-125"><a href="#call-125"><span class="linenos">125</span></a><span class="sd">    Returns:</span>
</span><span id="call-126"><a href="#call-126"><span class="linenos">126</span></a><span class="sd">        awaited result or result</span>
</span><span id="call-127"><a href="#call-127"><span class="linenos">127</span></a>
</span><span id="call-128"><a href="#call-128"><span class="linenos">128</span></a><span class="sd">    Example:</span>
</span><span id="call-129"><a href="#call-129"><span class="linenos">129</span></a>
</span><span id="call-130"><a href="#call-130"><span class="linenos">130</span></a><span class="sd">        def f1(x):</span>
</span><span id="call-131"><a href="#call-131"><span class="linenos">131</span></a><span class="sd">            return x</span>
</span><span id="call-132"><a href="#call-132"><span class="linenos">132</span></a>
</span><span id="call-133"><a href="#call-133"><span class="linenos">133</span></a><span class="sd">        def f2(x):</span>
</span><span id="call-134"><a href="#call-134"><span class="linenos">134</span></a><span class="sd">            f = asyncio.Future()</span>
</span><span id="call-135"><a href="#call-135"><span class="linenos">135</span></a><span class="sd">            f.set_result(x)</span>
</span><span id="call-136"><a href="#call-136"><span class="linenos">136</span></a><span class="sd">            return f</span>
</span><span id="call-137"><a href="#call-137"><span class="linenos">137</span></a>
</span><span id="call-138"><a href="#call-138"><span class="linenos">138</span></a><span class="sd">        async def f3(x):</span>
</span><span id="call-139"><a href="#call-139"><span class="linenos">139</span></a><span class="sd">            return x</span>
</span><span id="call-140"><a href="#call-140"><span class="linenos">140</span></a>
</span><span id="call-141"><a href="#call-141"><span class="linenos">141</span></a><span class="sd">        assert &#39;f1&#39; == await hat.aio.call(f1, &#39;f1&#39;)</span>
</span><span id="call-142"><a href="#call-142"><span class="linenos">142</span></a><span class="sd">        assert &#39;f2&#39; == await hat.aio.call(f2, &#39;f2&#39;)</span>
</span><span id="call-143"><a href="#call-143"><span class="linenos">143</span></a><span class="sd">        assert &#39;f3&#39; == await hat.aio.call(f3, &#39;f3&#39;)</span>
</span><span id="call-144"><a href="#call-144"><span class="linenos">144</span></a>
</span><span id="call-145"><a href="#call-145"><span class="linenos">145</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="call-146"><a href="#call-146"><span class="linenos">146</span></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="call-147"><a href="#call-147"><span class="linenos">147</span></a>
</span><span id="call-148"><a href="#call-148"><span class="linenos">148</span></a>    <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isawaitable</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
</span><span id="call-149"><a href="#call-149"><span class="linenos">149</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">result</span>
</span><span id="call-150"><a href="#call-150"><span class="linenos">150</span></a>
</span><span id="call-151"><a href="#call-151"><span class="linenos">151</span></a>    <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Call a function or a coroutine (or other callable object).</p>

<p>Call the <code>fn</code> with <code>args</code> and <code>kwargs</code>. If result of this call is
awaitable, it is awaited and returned. Otherwise, result is immediately
returned.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>fn:</strong>  callable object</li>
<li><strong>args:</strong>  additional positional arguments</li>
<li><strong>kwargs:</strong>  additional keyword arguments</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>awaited result or result</p>
</blockquote>

<h6 id="example">Example:</h6>

<blockquote>
  <p>def f1(x):
      return x</p>
  
  <p>def f2(x):
      f = asyncio.Future()
      f.set_result(x)
      return f</p>
  
  <p>async def f3(x):
      return x</p>
  
  <p>assert 'f1' == await <a href="#call">hat.aio.call</a>(f1, 'f1')
  assert 'f2' == await <a href="#call">hat.aio.call</a>(f2, 'f2')
  assert 'f3' == await <a href="#call">hat.aio.call</a>(f3, 'f3')</p>
</blockquote>
</div>


                </section>
                <section id="call_on_cancel">
                            <input id="call_on_cancel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">call_on_cancel</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">]]]</span>, </span><span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="o">~</span><span class="n">T</span>:</span></span>

                <label class="view-source-button" for="call_on_cancel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#call_on_cancel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="call_on_cancel-154"><a href="#call_on_cancel-154"><span class="linenos">154</span></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">call_on_cancel</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="n">AsyncCallable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">T</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="call_on_cancel-155"><a href="#call_on_cancel-155"><span class="linenos">155</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Call a function or a coroutine when canceled.</span>
</span><span id="call_on_cancel-156"><a href="#call_on_cancel-156"><span class="linenos">156</span></a>
</span><span id="call_on_cancel-157"><a href="#call_on_cancel-157"><span class="linenos">157</span></a><span class="sd">    When canceled, `fn` is called with `args` and `kwargs` by using</span>
</span><span id="call_on_cancel-158"><a href="#call_on_cancel-158"><span class="linenos">158</span></a><span class="sd">    `call` coroutine.</span>
</span><span id="call_on_cancel-159"><a href="#call_on_cancel-159"><span class="linenos">159</span></a>
</span><span id="call_on_cancel-160"><a href="#call_on_cancel-160"><span class="linenos">160</span></a><span class="sd">    Args:</span>
</span><span id="call_on_cancel-161"><a href="#call_on_cancel-161"><span class="linenos">161</span></a><span class="sd">        fn: function or coroutine</span>
</span><span id="call_on_cancel-162"><a href="#call_on_cancel-162"><span class="linenos">162</span></a><span class="sd">        args: additional function arguments</span>
</span><span id="call_on_cancel-163"><a href="#call_on_cancel-163"><span class="linenos">163</span></a><span class="sd">        kwargs: additional function keyword arguments</span>
</span><span id="call_on_cancel-164"><a href="#call_on_cancel-164"><span class="linenos">164</span></a>
</span><span id="call_on_cancel-165"><a href="#call_on_cancel-165"><span class="linenos">165</span></a><span class="sd">    Returns:</span>
</span><span id="call_on_cancel-166"><a href="#call_on_cancel-166"><span class="linenos">166</span></a><span class="sd">        function result</span>
</span><span id="call_on_cancel-167"><a href="#call_on_cancel-167"><span class="linenos">167</span></a>
</span><span id="call_on_cancel-168"><a href="#call_on_cancel-168"><span class="linenos">168</span></a><span class="sd">    Example::</span>
</span><span id="call_on_cancel-169"><a href="#call_on_cancel-169"><span class="linenos">169</span></a>
</span><span id="call_on_cancel-170"><a href="#call_on_cancel-170"><span class="linenos">170</span></a><span class="sd">        f = asyncio.Future()</span>
</span><span id="call_on_cancel-171"><a href="#call_on_cancel-171"><span class="linenos">171</span></a><span class="sd">        group = Group()</span>
</span><span id="call_on_cancel-172"><a href="#call_on_cancel-172"><span class="linenos">172</span></a><span class="sd">        group.spawn(call_on_cancel, f.set_result, 123)</span>
</span><span id="call_on_cancel-173"><a href="#call_on_cancel-173"><span class="linenos">173</span></a><span class="sd">        assert not f.done()</span>
</span><span id="call_on_cancel-174"><a href="#call_on_cancel-174"><span class="linenos">174</span></a><span class="sd">        await group.async_close()</span>
</span><span id="call_on_cancel-175"><a href="#call_on_cancel-175"><span class="linenos">175</span></a><span class="sd">        assert f.result() == 123</span>
</span><span id="call_on_cancel-176"><a href="#call_on_cancel-176"><span class="linenos">176</span></a>
</span><span id="call_on_cancel-177"><a href="#call_on_cancel-177"><span class="linenos">177</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="call_on_cancel-178"><a href="#call_on_cancel-178"><span class="linenos">178</span></a>    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">):</span>
</span><span id="call_on_cancel-179"><a href="#call_on_cancel-179"><span class="linenos">179</span></a>        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>
</span><span id="call_on_cancel-180"><a href="#call_on_cancel-180"><span class="linenos">180</span></a>
</span><span id="call_on_cancel-181"><a href="#call_on_cancel-181"><span class="linenos">181</span></a>    <span class="k">return</span> <span class="k">await</span> <span class="n">call</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">*</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Call a function or a coroutine when canceled.</p>

<p>When canceled, <code>fn</code> is called with <code>args</code> and <code>kwargs</code> by using
<code><a href="#call">call</a></code> coroutine.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>fn:</strong>  function or coroutine</li>
<li><strong>args:</strong>  additional function arguments</li>
<li><strong>kwargs:</strong>  additional function keyword arguments</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>function result</p>
</blockquote>

<p>Example::</p>

<pre><code>f = asyncio.Future()
group = Group()
group.spawn(call_on_cancel, f.set_result, 123)
assert not f.done()
await group.async_close()
assert f.result() == 123
</code></pre>
</div>


                </section>
                <section id="call_on_done">
                            <input id="call_on_done-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">call_on_done</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">f</span><span class="p">:</span> <span class="n">Awaitable</span>,</span><span class="param">	<span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">]]]</span>,</span><span class="param">	<span class="o">*</span><span class="n">args</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="o">~</span><span class="n">T</span>:</span></span>

                <label class="view-source-button" for="call_on_done-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#call_on_done"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="call_on_done-184"><a href="#call_on_done-184"><span class="linenos">184</span></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">call_on_done</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="n">Awaitable</span><span class="p">,</span>
</span><span id="call_on_done-185"><a href="#call_on_done-185"><span class="linenos">185</span></a>                       <span class="n">fn</span><span class="p">:</span> <span class="n">AsyncCallable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">T</span><span class="p">],</span>
</span><span id="call_on_done-186"><a href="#call_on_done-186"><span class="linenos">186</span></a>                       <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="call_on_done-187"><a href="#call_on_done-187"><span class="linenos">187</span></a>                       <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="call_on_done-188"><a href="#call_on_done-188"><span class="linenos">188</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Call a function or a coroutine when awaitable is done.</span>
</span><span id="call_on_done-189"><a href="#call_on_done-189"><span class="linenos">189</span></a>
</span><span id="call_on_done-190"><a href="#call_on_done-190"><span class="linenos">190</span></a><span class="sd">    When `f` is done, `fn` is called with `args` and `kwargs` by using</span>
</span><span id="call_on_done-191"><a href="#call_on_done-191"><span class="linenos">191</span></a><span class="sd">    `call` coroutine.</span>
</span><span id="call_on_done-192"><a href="#call_on_done-192"><span class="linenos">192</span></a>
</span><span id="call_on_done-193"><a href="#call_on_done-193"><span class="linenos">193</span></a><span class="sd">    If this coroutine is canceled before `f` is done, `f` is canceled and `fn`</span>
</span><span id="call_on_done-194"><a href="#call_on_done-194"><span class="linenos">194</span></a><span class="sd">    is not called.</span>
</span><span id="call_on_done-195"><a href="#call_on_done-195"><span class="linenos">195</span></a>
</span><span id="call_on_done-196"><a href="#call_on_done-196"><span class="linenos">196</span></a><span class="sd">    If this coroutine is canceled after `f` is done, `fn` call is canceled.</span>
</span><span id="call_on_done-197"><a href="#call_on_done-197"><span class="linenos">197</span></a>
</span><span id="call_on_done-198"><a href="#call_on_done-198"><span class="linenos">198</span></a><span class="sd">    Args:</span>
</span><span id="call_on_done-199"><a href="#call_on_done-199"><span class="linenos">199</span></a><span class="sd">        f: awaitable future</span>
</span><span id="call_on_done-200"><a href="#call_on_done-200"><span class="linenos">200</span></a><span class="sd">        fn: function or coroutine</span>
</span><span id="call_on_done-201"><a href="#call_on_done-201"><span class="linenos">201</span></a><span class="sd">        args: additional function arguments</span>
</span><span id="call_on_done-202"><a href="#call_on_done-202"><span class="linenos">202</span></a><span class="sd">        kwargs: additional function keyword arguments</span>
</span><span id="call_on_done-203"><a href="#call_on_done-203"><span class="linenos">203</span></a>
</span><span id="call_on_done-204"><a href="#call_on_done-204"><span class="linenos">204</span></a><span class="sd">    Returns:</span>
</span><span id="call_on_done-205"><a href="#call_on_done-205"><span class="linenos">205</span></a><span class="sd">        function result</span>
</span><span id="call_on_done-206"><a href="#call_on_done-206"><span class="linenos">206</span></a>
</span><span id="call_on_done-207"><a href="#call_on_done-207"><span class="linenos">207</span></a><span class="sd">    Example::</span>
</span><span id="call_on_done-208"><a href="#call_on_done-208"><span class="linenos">208</span></a>
</span><span id="call_on_done-209"><a href="#call_on_done-209"><span class="linenos">209</span></a><span class="sd">        f = asyncio.Future()</span>
</span><span id="call_on_done-210"><a href="#call_on_done-210"><span class="linenos">210</span></a><span class="sd">        group = Group()</span>
</span><span id="call_on_done-211"><a href="#call_on_done-211"><span class="linenos">211</span></a><span class="sd">        group.spawn(call_on_done, f, group.close)</span>
</span><span id="call_on_done-212"><a href="#call_on_done-212"><span class="linenos">212</span></a><span class="sd">        assert group.is_open</span>
</span><span id="call_on_done-213"><a href="#call_on_done-213"><span class="linenos">213</span></a><span class="sd">        f.set_result(None)</span>
</span><span id="call_on_done-214"><a href="#call_on_done-214"><span class="linenos">214</span></a><span class="sd">        await group.wait_closed()</span>
</span><span id="call_on_done-215"><a href="#call_on_done-215"><span class="linenos">215</span></a><span class="sd">        assert group.is_closed</span>
</span><span id="call_on_done-216"><a href="#call_on_done-216"><span class="linenos">216</span></a>
</span><span id="call_on_done-217"><a href="#call_on_done-217"><span class="linenos">217</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="call_on_done-218"><a href="#call_on_done-218"><span class="linenos">218</span></a>    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="call_on_done-219"><a href="#call_on_done-219"><span class="linenos">219</span></a>        <span class="k">await</span> <span class="n">f</span>
</span><span id="call_on_done-220"><a href="#call_on_done-220"><span class="linenos">220</span></a>
</span><span id="call_on_done-221"><a href="#call_on_done-221"><span class="linenos">221</span></a>    <span class="k">return</span> <span class="k">await</span> <span class="n">call</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">*</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Call a function or a coroutine when awaitable is done.</p>

<p>When <code>f</code> is done, <code>fn</code> is called with <code>args</code> and <code>kwargs</code> by using
<code><a href="#call">call</a></code> coroutine.</p>

<p>If this coroutine is canceled before <code>f</code> is done, <code>f</code> is canceled and <code>fn</code>
is not called.</p>

<p>If this coroutine is canceled after <code>f</code> is done, <code>fn</code> call is canceled.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>f:</strong>  awaitable future</li>
<li><strong>fn:</strong>  function or coroutine</li>
<li><strong>args:</strong>  additional function arguments</li>
<li><strong>kwargs:</strong>  additional function keyword arguments</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>function result</p>
</blockquote>

<p>Example::</p>

<pre><code>f = asyncio.Future()
group = Group()
group.spawn(call_on_done, f, group.close)
assert group.is_open
f.set_result(None)
await group.wait_closed()
assert group.is_closed
</code></pre>
</div>


                </section>
                <section id="init_asyncio">
                            <input id="init_asyncio-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">init_asyncio</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">policy</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">AbstractEventLoopPolicy</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="init_asyncio-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#init_asyncio"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="init_asyncio-224"><a href="#init_asyncio-224"><span class="linenos">224</span></a><span class="k">def</span><span class="w"> </span><span class="nf">init_asyncio</span><span class="p">(</span><span class="n">policy</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">AbstractEventLoopPolicy</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="init_asyncio-225"><a href="#init_asyncio-225"><span class="linenos">225</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize asyncio.</span>
</span><span id="init_asyncio-226"><a href="#init_asyncio-226"><span class="linenos">226</span></a>
</span><span id="init_asyncio-227"><a href="#init_asyncio-227"><span class="linenos">227</span></a><span class="sd">    Sets event loop policy (if ``None``, instance of</span>
</span><span id="init_asyncio-228"><a href="#init_asyncio-228"><span class="linenos">228</span></a><span class="sd">    `asyncio.DefaultEventLoopPolicy` is used).</span>
</span><span id="init_asyncio-229"><a href="#init_asyncio-229"><span class="linenos">229</span></a>
</span><span id="init_asyncio-230"><a href="#init_asyncio-230"><span class="linenos">230</span></a><span class="sd">    On Windows, `asyncio.WindowsProactorEventLoopPolicy` is used as default</span>
</span><span id="init_asyncio-231"><a href="#init_asyncio-231"><span class="linenos">231</span></a><span class="sd">    policy.</span>
</span><span id="init_asyncio-232"><a href="#init_asyncio-232"><span class="linenos">232</span></a>
</span><span id="init_asyncio-233"><a href="#init_asyncio-233"><span class="linenos">233</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="init_asyncio-234"><a href="#init_asyncio-234"><span class="linenos">234</span></a>
</span><span id="init_asyncio-235"><a href="#init_asyncio-235"><span class="linenos">235</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_default_policy</span><span class="p">():</span>
</span><span id="init_asyncio-236"><a href="#init_asyncio-236"><span class="linenos">236</span></a>        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s1">&#39;win32&#39;</span><span class="p">:</span>
</span><span id="init_asyncio-237"><a href="#init_asyncio-237"><span class="linenos">237</span></a>            <span class="k">return</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">WindowsProactorEventLoopPolicy</span><span class="p">()</span>
</span><span id="init_asyncio-238"><a href="#init_asyncio-238"><span class="linenos">238</span></a>
</span><span id="init_asyncio-239"><a href="#init_asyncio-239"><span class="linenos">239</span></a>        <span class="c1"># TODO: evaluate usage of uvloop</span>
</span><span id="init_asyncio-240"><a href="#init_asyncio-240"><span class="linenos">240</span></a>        <span class="c1"># with contextlib.suppress(ModuleNotFoundError):</span>
</span><span id="init_asyncio-241"><a href="#init_asyncio-241"><span class="linenos">241</span></a>        <span class="c1">#     import uvloop</span>
</span><span id="init_asyncio-242"><a href="#init_asyncio-242"><span class="linenos">242</span></a>        <span class="c1">#     return uvloop.EventLoopPolicy()</span>
</span><span id="init_asyncio-243"><a href="#init_asyncio-243"><span class="linenos">243</span></a>
</span><span id="init_asyncio-244"><a href="#init_asyncio-244"><span class="linenos">244</span></a>        <span class="k">return</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">DefaultEventLoopPolicy</span><span class="p">()</span>
</span><span id="init_asyncio-245"><a href="#init_asyncio-245"><span class="linenos">245</span></a>
</span><span id="init_asyncio-246"><a href="#init_asyncio-246"><span class="linenos">246</span></a>    <span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop_policy</span><span class="p">(</span><span class="n">policy</span> <span class="ow">or</span> <span class="n">get_default_policy</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Initialize asyncio.</p>

<p>Sets event loop policy (if <code>None</code>, instance of
<code>asyncio.DefaultEventLoopPolicy</code> is used).</p>

<p>On Windows, <code>asyncio.WindowsProactorEventLoopPolicy</code> is used as default
policy.</p>
</div>


                </section>
                <section id="run_asyncio">
                            <input id="run_asyncio-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run_asyncio</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">future</span><span class="p">:</span> <span class="n">Awaitable</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">]</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">handle_signals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">AbstractEventLoop</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="o">~</span><span class="n">T</span>:</span></span>

                <label class="view-source-button" for="run_asyncio-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#run_asyncio"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="run_asyncio-249"><a href="#run_asyncio-249"><span class="linenos">249</span></a><span class="k">def</span><span class="w"> </span><span class="nf">run_asyncio</span><span class="p">(</span><span class="n">future</span><span class="p">:</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span>
</span><span id="run_asyncio-250"><a href="#run_asyncio-250"><span class="linenos">250</span></a>                <span class="n">handle_signals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="run_asyncio-251"><a href="#run_asyncio-251"><span class="linenos">251</span></a>                <span class="n">loop</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">AbstractEventLoop</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="run_asyncio-252"><a href="#run_asyncio-252"><span class="linenos">252</span></a>                <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="run_asyncio-253"><a href="#run_asyncio-253"><span class="linenos">253</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Run asyncio loop until the `future` is completed and return the result.</span>
</span><span id="run_asyncio-254"><a href="#run_asyncio-254"><span class="linenos">254</span></a>
</span><span id="run_asyncio-255"><a href="#run_asyncio-255"><span class="linenos">255</span></a><span class="sd">    If `handle_signals` is ``True``, SIGINT and SIGTERM handlers are</span>
</span><span id="run_asyncio-256"><a href="#run_asyncio-256"><span class="linenos">256</span></a><span class="sd">    temporarily overridden. Instead of raising ``KeyboardInterrupt`` on every</span>
</span><span id="run_asyncio-257"><a href="#run_asyncio-257"><span class="linenos">257</span></a><span class="sd">    signal reception, Future is canceled only once. Additional signals are</span>
</span><span id="run_asyncio-258"><a href="#run_asyncio-258"><span class="linenos">258</span></a><span class="sd">    ignored. On Windows, SIGBREAK (CTRL_BREAK_EVENT) handler is also</span>
</span><span id="run_asyncio-259"><a href="#run_asyncio-259"><span class="linenos">259</span></a><span class="sd">    overridden.</span>
</span><span id="run_asyncio-260"><a href="#run_asyncio-260"><span class="linenos">260</span></a>
</span><span id="run_asyncio-261"><a href="#run_asyncio-261"><span class="linenos">261</span></a><span class="sd">    If `loop` is set to ``None``, new event loop is created and set</span>
</span><span id="run_asyncio-262"><a href="#run_asyncio-262"><span class="linenos">262</span></a><span class="sd">    as thread&#39;s default event loop. Newly created loop is closed when this</span>
</span><span id="run_asyncio-263"><a href="#run_asyncio-263"><span class="linenos">263</span></a><span class="sd">    coroutine returns. Running tasks or async generators, other than provided</span>
</span><span id="run_asyncio-264"><a href="#run_asyncio-264"><span class="linenos">264</span></a><span class="sd">    `future`, are not canceled prior to loop closing.</span>
</span><span id="run_asyncio-265"><a href="#run_asyncio-265"><span class="linenos">265</span></a>
</span><span id="run_asyncio-266"><a href="#run_asyncio-266"><span class="linenos">266</span></a><span class="sd">    On Windows, asyncio loop gets periodically woken up (every 0.5 seconds).</span>
</span><span id="run_asyncio-267"><a href="#run_asyncio-267"><span class="linenos">267</span></a>
</span><span id="run_asyncio-268"><a href="#run_asyncio-268"><span class="linenos">268</span></a><span class="sd">    Args:</span>
</span><span id="run_asyncio-269"><a href="#run_asyncio-269"><span class="linenos">269</span></a><span class="sd">        future: future or coroutine</span>
</span><span id="run_asyncio-270"><a href="#run_asyncio-270"><span class="linenos">270</span></a><span class="sd">        handle_signals: handle signals flag</span>
</span><span id="run_asyncio-271"><a href="#run_asyncio-271"><span class="linenos">271</span></a><span class="sd">        loop: event loop</span>
</span><span id="run_asyncio-272"><a href="#run_asyncio-272"><span class="linenos">272</span></a>
</span><span id="run_asyncio-273"><a href="#run_asyncio-273"><span class="linenos">273</span></a><span class="sd">    Returns:</span>
</span><span id="run_asyncio-274"><a href="#run_asyncio-274"><span class="linenos">274</span></a><span class="sd">        future&#39;s result</span>
</span><span id="run_asyncio-275"><a href="#run_asyncio-275"><span class="linenos">275</span></a>
</span><span id="run_asyncio-276"><a href="#run_asyncio-276"><span class="linenos">276</span></a><span class="sd">    Example::</span>
</span><span id="run_asyncio-277"><a href="#run_asyncio-277"><span class="linenos">277</span></a>
</span><span id="run_asyncio-278"><a href="#run_asyncio-278"><span class="linenos">278</span></a><span class="sd">        async def run():</span>
</span><span id="run_asyncio-279"><a href="#run_asyncio-279"><span class="linenos">279</span></a><span class="sd">            await asyncio.sleep(0)</span>
</span><span id="run_asyncio-280"><a href="#run_asyncio-280"><span class="linenos">280</span></a><span class="sd">            return 123</span>
</span><span id="run_asyncio-281"><a href="#run_asyncio-281"><span class="linenos">281</span></a>
</span><span id="run_asyncio-282"><a href="#run_asyncio-282"><span class="linenos">282</span></a><span class="sd">        result = run_asyncio(run())</span>
</span><span id="run_asyncio-283"><a href="#run_asyncio-283"><span class="linenos">283</span></a><span class="sd">        assert result == 123</span>
</span><span id="run_asyncio-284"><a href="#run_asyncio-284"><span class="linenos">284</span></a>
</span><span id="run_asyncio-285"><a href="#run_asyncio-285"><span class="linenos">285</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="run_asyncio-286"><a href="#run_asyncio-286"><span class="linenos">286</span></a>    <span class="n">close_loop</span> <span class="o">=</span> <span class="n">loop</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="run_asyncio-287"><a href="#run_asyncio-287"><span class="linenos">287</span></a>    <span class="k">if</span> <span class="n">loop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="run_asyncio-288"><a href="#run_asyncio-288"><span class="linenos">288</span></a>        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>
</span><span id="run_asyncio-289"><a href="#run_asyncio-289"><span class="linenos">289</span></a>        <span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="n">loop</span><span class="p">)</span>
</span><span id="run_asyncio-290"><a href="#run_asyncio-290"><span class="linenos">290</span></a>
</span><span id="run_asyncio-291"><a href="#run_asyncio-291"><span class="linenos">291</span></a>    <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span><span class="n">future</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="n">loop</span><span class="p">)</span>
</span><span id="run_asyncio-292"><a href="#run_asyncio-292"><span class="linenos">292</span></a>
</span><span id="run_asyncio-293"><a href="#run_asyncio-293"><span class="linenos">293</span></a>    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s1">&#39;win32&#39;</span><span class="p">:</span>
</span><span id="run_asyncio-294"><a href="#run_asyncio-294"><span class="linenos">294</span></a>
</span><span id="run_asyncio-295"><a href="#run_asyncio-295"><span class="linenos">295</span></a>        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">task_wrapper</span><span class="p">(</span><span class="n">task</span><span class="p">):</span>
</span><span id="run_asyncio-296"><a href="#run_asyncio-296"><span class="linenos">296</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="run_asyncio-297"><a href="#run_asyncio-297"><span class="linenos">297</span></a>                <span class="k">while</span> <span class="ow">not</span> <span class="n">task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="run_asyncio-298"><a href="#run_asyncio-298"><span class="linenos">298</span></a>                    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait</span><span class="p">([</span><span class="n">task</span><span class="p">],</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</span><span id="run_asyncio-299"><a href="#run_asyncio-299"><span class="linenos">299</span></a>            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
</span><span id="run_asyncio-300"><a href="#run_asyncio-300"><span class="linenos">300</span></a>                <span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
</span><span id="run_asyncio-301"><a href="#run_asyncio-301"><span class="linenos">301</span></a>            <span class="k">return</span> <span class="k">await</span> <span class="n">task</span>
</span><span id="run_asyncio-302"><a href="#run_asyncio-302"><span class="linenos">302</span></a>
</span><span id="run_asyncio-303"><a href="#run_asyncio-303"><span class="linenos">303</span></a>        <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span><span class="n">task_wrapper</span><span class="p">(</span><span class="n">task</span><span class="p">),</span> <span class="n">loop</span><span class="o">=</span><span class="n">loop</span><span class="p">)</span>
</span><span id="run_asyncio-304"><a href="#run_asyncio-304"><span class="linenos">304</span></a>
</span><span id="run_asyncio-305"><a href="#run_asyncio-305"><span class="linenos">305</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">handle_signals</span><span class="p">:</span>
</span><span id="run_asyncio-306"><a href="#run_asyncio-306"><span class="linenos">306</span></a>        <span class="k">return</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
</span><span id="run_asyncio-307"><a href="#run_asyncio-307"><span class="linenos">307</span></a>
</span><span id="run_asyncio-308"><a href="#run_asyncio-308"><span class="linenos">308</span></a>    <span class="n">canceled</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="run_asyncio-309"><a href="#run_asyncio-309"><span class="linenos">309</span></a>    <span class="n">signalnums</span> <span class="o">=</span> <span class="p">[</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span> <span class="n">signal</span><span class="o">.</span><span class="n">SIGTERM</span><span class="p">]</span>
</span><span id="run_asyncio-310"><a href="#run_asyncio-310"><span class="linenos">310</span></a>    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s1">&#39;win32&#39;</span><span class="p">:</span>
</span><span id="run_asyncio-311"><a href="#run_asyncio-311"><span class="linenos">311</span></a>        <span class="n">signalnums</span> <span class="o">+=</span> <span class="p">[</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGBREAK</span><span class="p">]</span>
</span><span id="run_asyncio-312"><a href="#run_asyncio-312"><span class="linenos">312</span></a>
</span><span id="run_asyncio-313"><a href="#run_asyncio-313"><span class="linenos">313</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">signal_handler</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
</span><span id="run_asyncio-314"><a href="#run_asyncio-314"><span class="linenos">314</span></a>        <span class="k">nonlocal</span> <span class="n">canceled</span>
</span><span id="run_asyncio-315"><a href="#run_asyncio-315"><span class="linenos">315</span></a>        <span class="k">if</span> <span class="n">canceled</span><span class="p">:</span>
</span><span id="run_asyncio-316"><a href="#run_asyncio-316"><span class="linenos">316</span></a>            <span class="k">return</span>
</span><span id="run_asyncio-317"><a href="#run_asyncio-317"><span class="linenos">317</span></a>        <span class="n">loop</span><span class="o">.</span><span class="n">call_soon_threadsafe</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">)</span>
</span><span id="run_asyncio-318"><a href="#run_asyncio-318"><span class="linenos">318</span></a>        <span class="n">canceled</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="run_asyncio-319"><a href="#run_asyncio-319"><span class="linenos">319</span></a>
</span><span id="run_asyncio-320"><a href="#run_asyncio-320"><span class="linenos">320</span></a>    <span class="n">handlers</span> <span class="o">=</span> <span class="p">{</span><span class="n">signalnum</span><span class="p">:</span> <span class="n">signal</span><span class="o">.</span><span class="n">getsignal</span><span class="p">(</span><span class="n">signalnum</span><span class="p">)</span> <span class="ow">or</span> <span class="n">signal</span><span class="o">.</span><span class="n">SIG_DFL</span>
</span><span id="run_asyncio-321"><a href="#run_asyncio-321"><span class="linenos">321</span></a>                <span class="k">for</span> <span class="n">signalnum</span> <span class="ow">in</span> <span class="n">signalnums</span><span class="p">}</span>
</span><span id="run_asyncio-322"><a href="#run_asyncio-322"><span class="linenos">322</span></a>    <span class="k">for</span> <span class="n">signalnum</span> <span class="ow">in</span> <span class="n">signalnums</span><span class="p">:</span>
</span><span id="run_asyncio-323"><a href="#run_asyncio-323"><span class="linenos">323</span></a>        <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signalnum</span><span class="p">,</span> <span class="n">signal_handler</span><span class="p">)</span>
</span><span id="run_asyncio-324"><a href="#run_asyncio-324"><span class="linenos">324</span></a>
</span><span id="run_asyncio-325"><a href="#run_asyncio-325"><span class="linenos">325</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="run_asyncio-326"><a href="#run_asyncio-326"><span class="linenos">326</span></a>        <span class="k">return</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
</span><span id="run_asyncio-327"><a href="#run_asyncio-327"><span class="linenos">327</span></a>
</span><span id="run_asyncio-328"><a href="#run_asyncio-328"><span class="linenos">328</span></a>    <span class="k">finally</span><span class="p">:</span>
</span><span id="run_asyncio-329"><a href="#run_asyncio-329"><span class="linenos">329</span></a>        <span class="k">for</span> <span class="n">signalnum</span><span class="p">,</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">handlers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="run_asyncio-330"><a href="#run_asyncio-330"><span class="linenos">330</span></a>            <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signalnum</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>
</span><span id="run_asyncio-331"><a href="#run_asyncio-331"><span class="linenos">331</span></a>        <span class="k">if</span> <span class="n">close_loop</span><span class="p">:</span>
</span><span id="run_asyncio-332"><a href="#run_asyncio-332"><span class="linenos">332</span></a>            <span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Run asyncio loop until the <code>future</code> is completed and return the result.</p>

<p>If <code>handle_signals</code> is <code>True</code>, SIGINT and SIGTERM handlers are
temporarily overridden. Instead of raising <code>KeyboardInterrupt</code> on every
signal reception, Future is canceled only once. Additional signals are
ignored. On Windows, SIGBREAK (CTRL_BREAK_EVENT) handler is also
overridden.</p>

<p>If <code>loop</code> is set to <code>None</code>, new event loop is created and set
as thread's default event loop. Newly created loop is closed when this
coroutine returns. Running tasks or async generators, other than provided
<code>future</code>, are not canceled prior to loop closing.</p>

<p>On Windows, asyncio loop gets periodically woken up (every 0.5 seconds).</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>future:</strong>  future or coroutine</li>
<li><strong>handle_signals:</strong>  handle signals flag</li>
<li><strong>loop:</strong>  event loop</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>future's result</p>
</blockquote>

<p>Example::</p>

<pre><code>async def run():
    await asyncio.sleep(0)
    return 123

result = run_asyncio(run())
assert result == 123
</code></pre>
</div>


                </section>
                <section id="QueueClosedError">
                            <input id="QueueClosedError-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">QueueClosedError</span><wbr>(<span class="base">builtins.Exception</span>):

                <label class="view-source-button" for="QueueClosedError-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QueueClosedError"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QueueClosedError-11"><a href="#QueueClosedError-11"><span class="linenos">11</span></a><span class="k">class</span><span class="w"> </span><span class="nc">QueueClosedError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="QueueClosedError-12"><a href="#QueueClosedError-12"><span class="linenos">12</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when trying to use a closed queue.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Raised when trying to use a closed queue.</p>
</div>


                </section>
                <section id="QueueEmptyError">
                            <input id="QueueEmptyError-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">QueueEmptyError</span><wbr>(<span class="base">builtins.Exception</span>):

                <label class="view-source-button" for="QueueEmptyError-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QueueEmptyError"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QueueEmptyError-15"><a href="#QueueEmptyError-15"><span class="linenos">15</span></a><span class="k">class</span><span class="w"> </span><span class="nc">QueueEmptyError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="QueueEmptyError-16"><a href="#QueueEmptyError-16"><span class="linenos">16</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised if queue is empty.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Raised if queue is empty.</p>
</div>


                </section>
                <section id="QueueFullError">
                            <input id="QueueFullError-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">QueueFullError</span><wbr>(<span class="base">builtins.Exception</span>):

                <label class="view-source-button" for="QueueFullError-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QueueFullError"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QueueFullError-19"><a href="#QueueFullError-19"><span class="linenos">19</span></a><span class="k">class</span><span class="w"> </span><span class="nc">QueueFullError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="QueueFullError-20"><a href="#QueueFullError-20"><span class="linenos">20</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised if queue is full.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Raised if queue is full.</p>
</div>


                </section>
                <section id="Queue">
                            <input id="Queue-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Queue</span><wbr>(<span class="base">typing.Generic[~T]</span>):

                <label class="view-source-button" for="Queue-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue-23"><a href="#Queue-23"><span class="linenos"> 23</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Queue</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
</span><span id="Queue-24"><a href="#Queue-24"><span class="linenos"> 24</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Asyncio queue which implements AsyncIterable and can be closed.</span>
</span><span id="Queue-25"><a href="#Queue-25"><span class="linenos"> 25</span></a>
</span><span id="Queue-26"><a href="#Queue-26"><span class="linenos"> 26</span></a><span class="sd">    Interface and implementation are based on `asyncio.Queue`.</span>
</span><span id="Queue-27"><a href="#Queue-27"><span class="linenos"> 27</span></a>
</span><span id="Queue-28"><a href="#Queue-28"><span class="linenos"> 28</span></a><span class="sd">    If `maxsize` is less than or equal to zero, the queue size is infinite.</span>
</span><span id="Queue-29"><a href="#Queue-29"><span class="linenos"> 29</span></a>
</span><span id="Queue-30"><a href="#Queue-30"><span class="linenos"> 30</span></a><span class="sd">    Args:</span>
</span><span id="Queue-31"><a href="#Queue-31"><span class="linenos"> 31</span></a><span class="sd">        maxsize: maximum number of items in the queue</span>
</span><span id="Queue-32"><a href="#Queue-32"><span class="linenos"> 32</span></a>
</span><span id="Queue-33"><a href="#Queue-33"><span class="linenos"> 33</span></a><span class="sd">    Example::</span>
</span><span id="Queue-34"><a href="#Queue-34"><span class="linenos"> 34</span></a>
</span><span id="Queue-35"><a href="#Queue-35"><span class="linenos"> 35</span></a><span class="sd">        queue = Queue(maxsize=1)</span>
</span><span id="Queue-36"><a href="#Queue-36"><span class="linenos"> 36</span></a>
</span><span id="Queue-37"><a href="#Queue-37"><span class="linenos"> 37</span></a><span class="sd">        async def producer():</span>
</span><span id="Queue-38"><a href="#Queue-38"><span class="linenos"> 38</span></a><span class="sd">            for i in range(4):</span>
</span><span id="Queue-39"><a href="#Queue-39"><span class="linenos"> 39</span></a><span class="sd">                await queue.put(i)</span>
</span><span id="Queue-40"><a href="#Queue-40"><span class="linenos"> 40</span></a><span class="sd">            queue.close()</span>
</span><span id="Queue-41"><a href="#Queue-41"><span class="linenos"> 41</span></a>
</span><span id="Queue-42"><a href="#Queue-42"><span class="linenos"> 42</span></a><span class="sd">        async def consumer():</span>
</span><span id="Queue-43"><a href="#Queue-43"><span class="linenos"> 43</span></a><span class="sd">            result = 0</span>
</span><span id="Queue-44"><a href="#Queue-44"><span class="linenos"> 44</span></a><span class="sd">            async for i in queue:</span>
</span><span id="Queue-45"><a href="#Queue-45"><span class="linenos"> 45</span></a><span class="sd">                result += i</span>
</span><span id="Queue-46"><a href="#Queue-46"><span class="linenos"> 46</span></a><span class="sd">            return result</span>
</span><span id="Queue-47"><a href="#Queue-47"><span class="linenos"> 47</span></a>
</span><span id="Queue-48"><a href="#Queue-48"><span class="linenos"> 48</span></a><span class="sd">        asyncio.ensure_future(producer())</span>
</span><span id="Queue-49"><a href="#Queue-49"><span class="linenos"> 49</span></a><span class="sd">        result = await consumer()</span>
</span><span id="Queue-50"><a href="#Queue-50"><span class="linenos"> 50</span></a><span class="sd">        assert result == 6</span>
</span><span id="Queue-51"><a href="#Queue-51"><span class="linenos"> 51</span></a>
</span><span id="Queue-52"><a href="#Queue-52"><span class="linenos"> 52</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Queue-53"><a href="#Queue-53"><span class="linenos"> 53</span></a>
</span><span id="Queue-54"><a href="#Queue-54"><span class="linenos"> 54</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Queue-55"><a href="#Queue-55"><span class="linenos"> 55</span></a>                 <span class="n">maxsize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="Queue-56"><a href="#Queue-56"><span class="linenos"> 56</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_maxsize</span> <span class="o">=</span> <span class="n">maxsize</span>
</span><span id="Queue-57"><a href="#Queue-57"><span class="linenos"> 57</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">deque</span><span class="p">()</span>
</span><span id="Queue-58"><a href="#Queue-58"><span class="linenos"> 58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_getters</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">deque</span><span class="p">()</span>
</span><span id="Queue-59"><a href="#Queue-59"><span class="linenos"> 59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_putters</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">deque</span><span class="p">()</span>
</span><span id="Queue-60"><a href="#Queue-60"><span class="linenos"> 60</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Queue-61"><a href="#Queue-61"><span class="linenos"> 61</span></a>
</span><span id="Queue-62"><a href="#Queue-62"><span class="linenos"> 62</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__aiter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Queue-63"><a href="#Queue-63"><span class="linenos"> 63</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Queue-64"><a href="#Queue-64"><span class="linenos"> 64</span></a>
</span><span id="Queue-65"><a href="#Queue-65"><span class="linenos"> 65</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__anext__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Queue-66"><a href="#Queue-66"><span class="linenos"> 66</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Queue-67"><a href="#Queue-67"><span class="linenos"> 67</span></a>            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span><span id="Queue-68"><a href="#Queue-68"><span class="linenos"> 68</span></a>
</span><span id="Queue-69"><a href="#Queue-69"><span class="linenos"> 69</span></a>        <span class="k">except</span> <span class="n">QueueClosedError</span><span class="p">:</span>
</span><span id="Queue-70"><a href="#Queue-70"><span class="linenos"> 70</span></a>            <span class="k">raise</span> <span class="ne">StopAsyncIteration</span>
</span><span id="Queue-71"><a href="#Queue-71"><span class="linenos"> 71</span></a>
</span><span id="Queue-72"><a href="#Queue-72"><span class="linenos"> 72</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Queue-73"><a href="#Queue-73"><span class="linenos"> 73</span></a>        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&lt;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="Queue-74"><a href="#Queue-74"><span class="linenos"> 74</span></a>                <span class="sa">f</span><span class="s1">&#39; _closed=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="si">}</span><span class="s1"> &#39;</span>
</span><span id="Queue-75"><a href="#Queue-75"><span class="linenos"> 75</span></a>                <span class="sa">f</span><span class="s1">&#39; _queue=</span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">)</span><span class="si">}</span><span class="s1">&gt;&#39;</span><span class="p">)</span>
</span><span id="Queue-76"><a href="#Queue-76"><span class="linenos"> 76</span></a>
</span><span id="Queue-77"><a href="#Queue-77"><span class="linenos"> 77</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Queue-78"><a href="#Queue-78"><span class="linenos"> 78</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">)</span>
</span><span id="Queue-79"><a href="#Queue-79"><span class="linenos"> 79</span></a>
</span><span id="Queue-80"><a href="#Queue-80"><span class="linenos"> 80</span></a>    <span class="nd">@property</span>
</span><span id="Queue-81"><a href="#Queue-81"><span class="linenos"> 81</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">maxsize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Queue-82"><a href="#Queue-82"><span class="linenos"> 82</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Maximum number of items in the queue.&quot;&quot;&quot;</span>
</span><span id="Queue-83"><a href="#Queue-83"><span class="linenos"> 83</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxsize</span>
</span><span id="Queue-84"><a href="#Queue-84"><span class="linenos"> 84</span></a>
</span><span id="Queue-85"><a href="#Queue-85"><span class="linenos"> 85</span></a>    <span class="nd">@property</span>
</span><span id="Queue-86"><a href="#Queue-86"><span class="linenos"> 86</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Queue-87"><a href="#Queue-87"><span class="linenos"> 87</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Is queue closed.&quot;&quot;&quot;</span>
</span><span id="Queue-88"><a href="#Queue-88"><span class="linenos"> 88</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span>
</span><span id="Queue-89"><a href="#Queue-89"><span class="linenos"> 89</span></a>
</span><span id="Queue-90"><a href="#Queue-90"><span class="linenos"> 90</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Queue-91"><a href="#Queue-91"><span class="linenos"> 91</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;``True`` if queue is empty, ``False`` otherwise.&quot;&quot;&quot;</span>
</span><span id="Queue-92"><a href="#Queue-92"><span class="linenos"> 92</span></a>        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span>
</span><span id="Queue-93"><a href="#Queue-93"><span class="linenos"> 93</span></a>
</span><span id="Queue-94"><a href="#Queue-94"><span class="linenos"> 94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">full</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Queue-95"><a href="#Queue-95"><span class="linenos"> 95</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;``True`` if queue is full, ``False`` otherwise.&quot;&quot;&quot;</span>
</span><span id="Queue-96"><a href="#Queue-96"><span class="linenos"> 96</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxsize</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Queue-97"><a href="#Queue-97"><span class="linenos"> 97</span></a>            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxsize</span>
</span><span id="Queue-98"><a href="#Queue-98"><span class="linenos"> 98</span></a>
</span><span id="Queue-99"><a href="#Queue-99"><span class="linenos"> 99</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="Queue-100"><a href="#Queue-100"><span class="linenos">100</span></a>
</span><span id="Queue-101"><a href="#Queue-101"><span class="linenos">101</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">qsize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Queue-102"><a href="#Queue-102"><span class="linenos">102</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Number of items currently in the queue.&quot;&quot;&quot;</span>
</span><span id="Queue-103"><a href="#Queue-103"><span class="linenos">103</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">)</span>
</span><span id="Queue-104"><a href="#Queue-104"><span class="linenos">104</span></a>
</span><span id="Queue-105"><a href="#Queue-105"><span class="linenos">105</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Queue-106"><a href="#Queue-106"><span class="linenos">106</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Close the queue.&quot;&quot;&quot;</span>
</span><span id="Queue-107"><a href="#Queue-107"><span class="linenos">107</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
</span><span id="Queue-108"><a href="#Queue-108"><span class="linenos">108</span></a>            <span class="k">return</span>
</span><span id="Queue-109"><a href="#Queue-109"><span class="linenos">109</span></a>
</span><span id="Queue-110"><a href="#Queue-110"><span class="linenos">110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Queue-111"><a href="#Queue-111"><span class="linenos">111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_putters</span><span class="p">)</span>
</span><span id="Queue-112"><a href="#Queue-112"><span class="linenos">112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getters</span><span class="p">)</span>
</span><span id="Queue-113"><a href="#Queue-113"><span class="linenos">113</span></a>
</span><span id="Queue-114"><a href="#Queue-114"><span class="linenos">114</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_nowait</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="Queue-115"><a href="#Queue-115"><span class="linenos">115</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an item if one is immediately available, else raise</span>
</span><span id="Queue-116"><a href="#Queue-116"><span class="linenos">116</span></a><span class="sd">        `QueueEmptyError`.</span>
</span><span id="Queue-117"><a href="#Queue-117"><span class="linenos">117</span></a>
</span><span id="Queue-118"><a href="#Queue-118"><span class="linenos">118</span></a><span class="sd">        Raises:</span>
</span><span id="Queue-119"><a href="#Queue-119"><span class="linenos">119</span></a><span class="sd">            QueueEmptyError</span>
</span><span id="Queue-120"><a href="#Queue-120"><span class="linenos">120</span></a>
</span><span id="Queue-121"><a href="#Queue-121"><span class="linenos">121</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Queue-122"><a href="#Queue-122"><span class="linenos">122</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
</span><span id="Queue-123"><a href="#Queue-123"><span class="linenos">123</span></a>            <span class="k">raise</span> <span class="n">QueueEmptyError</span><span class="p">()</span>
</span><span id="Queue-124"><a href="#Queue-124"><span class="linenos">124</span></a>
</span><span id="Queue-125"><a href="#Queue-125"><span class="linenos">125</span></a>        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
</span><span id="Queue-126"><a href="#Queue-126"><span class="linenos">126</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_putters</span><span class="p">)</span>
</span><span id="Queue-127"><a href="#Queue-127"><span class="linenos">127</span></a>        <span class="k">return</span> <span class="n">item</span>
</span><span id="Queue-128"><a href="#Queue-128"><span class="linenos">128</span></a>
</span><span id="Queue-129"><a href="#Queue-129"><span class="linenos">129</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">put_nowait</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">T</span><span class="p">):</span>
</span><span id="Queue-130"><a href="#Queue-130"><span class="linenos">130</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Put an item into the queue without blocking.</span>
</span><span id="Queue-131"><a href="#Queue-131"><span class="linenos">131</span></a>
</span><span id="Queue-132"><a href="#Queue-132"><span class="linenos">132</span></a><span class="sd">        If no free slot is immediately available, raise `QueueFullError`.</span>
</span><span id="Queue-133"><a href="#Queue-133"><span class="linenos">133</span></a>
</span><span id="Queue-134"><a href="#Queue-134"><span class="linenos">134</span></a><span class="sd">        Raises:</span>
</span><span id="Queue-135"><a href="#Queue-135"><span class="linenos">135</span></a><span class="sd">            QueueFullError</span>
</span><span id="Queue-136"><a href="#Queue-136"><span class="linenos">136</span></a>
</span><span id="Queue-137"><a href="#Queue-137"><span class="linenos">137</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Queue-138"><a href="#Queue-138"><span class="linenos">138</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
</span><span id="Queue-139"><a href="#Queue-139"><span class="linenos">139</span></a>            <span class="k">raise</span> <span class="n">QueueClosedError</span><span class="p">()</span>
</span><span id="Queue-140"><a href="#Queue-140"><span class="linenos">140</span></a>
</span><span id="Queue-141"><a href="#Queue-141"><span class="linenos">141</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">full</span><span class="p">():</span>
</span><span id="Queue-142"><a href="#Queue-142"><span class="linenos">142</span></a>            <span class="k">raise</span> <span class="n">QueueFullError</span><span class="p">()</span>
</span><span id="Queue-143"><a href="#Queue-143"><span class="linenos">143</span></a>
</span><span id="Queue-144"><a href="#Queue-144"><span class="linenos">144</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="Queue-145"><a href="#Queue-145"><span class="linenos">145</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getters</span><span class="p">)</span>
</span><span id="Queue-146"><a href="#Queue-146"><span class="linenos">146</span></a>
</span><span id="Queue-147"><a href="#Queue-147"><span class="linenos">147</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="Queue-148"><a href="#Queue-148"><span class="linenos">148</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove and return an item from the queue.</span>
</span><span id="Queue-149"><a href="#Queue-149"><span class="linenos">149</span></a>
</span><span id="Queue-150"><a href="#Queue-150"><span class="linenos">150</span></a><span class="sd">        If queue is empty, wait until an item is available.</span>
</span><span id="Queue-151"><a href="#Queue-151"><span class="linenos">151</span></a>
</span><span id="Queue-152"><a href="#Queue-152"><span class="linenos">152</span></a><span class="sd">        Raises:</span>
</span><span id="Queue-153"><a href="#Queue-153"><span class="linenos">153</span></a><span class="sd">            QueueClosedError</span>
</span><span id="Queue-154"><a href="#Queue-154"><span class="linenos">154</span></a>
</span><span id="Queue-155"><a href="#Queue-155"><span class="linenos">155</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Queue-156"><a href="#Queue-156"><span class="linenos">156</span></a>        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
</span><span id="Queue-157"><a href="#Queue-157"><span class="linenos">157</span></a>
</span><span id="Queue-158"><a href="#Queue-158"><span class="linenos">158</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
</span><span id="Queue-159"><a href="#Queue-159"><span class="linenos">159</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
</span><span id="Queue-160"><a href="#Queue-160"><span class="linenos">160</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getters</span><span class="p">)</span>
</span><span id="Queue-161"><a href="#Queue-161"><span class="linenos">161</span></a>                <span class="k">raise</span> <span class="n">QueueClosedError</span><span class="p">()</span>
</span><span id="Queue-162"><a href="#Queue-162"><span class="linenos">162</span></a>
</span><span id="Queue-163"><a href="#Queue-163"><span class="linenos">163</span></a>            <span class="n">getter</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>
</span><span id="Queue-164"><a href="#Queue-164"><span class="linenos">164</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_getters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">getter</span><span class="p">)</span>
</span><span id="Queue-165"><a href="#Queue-165"><span class="linenos">165</span></a>
</span><span id="Queue-166"><a href="#Queue-166"><span class="linenos">166</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Queue-167"><a href="#Queue-167"><span class="linenos">167</span></a>                <span class="k">await</span> <span class="n">getter</span>
</span><span id="Queue-168"><a href="#Queue-168"><span class="linenos">168</span></a>
</span><span id="Queue-169"><a href="#Queue-169"><span class="linenos">169</span></a>            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
</span><span id="Queue-170"><a href="#Queue-170"><span class="linenos">170</span></a>                <span class="n">getter</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
</span><span id="Queue-171"><a href="#Queue-171"><span class="linenos">171</span></a>
</span><span id="Queue-172"><a href="#Queue-172"><span class="linenos">172</span></a>                <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
</span><span id="Queue-173"><a href="#Queue-173"><span class="linenos">173</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_getters</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">getter</span><span class="p">)</span>
</span><span id="Queue-174"><a href="#Queue-174"><span class="linenos">174</span></a>
</span><span id="Queue-175"><a href="#Queue-175"><span class="linenos">175</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">getter</span><span class="o">.</span><span class="n">cancelled</span><span class="p">():</span>
</span><span id="Queue-176"><a href="#Queue-176"><span class="linenos">176</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
</span><span id="Queue-177"><a href="#Queue-177"><span class="linenos">177</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getters</span><span class="p">)</span>
</span><span id="Queue-178"><a href="#Queue-178"><span class="linenos">178</span></a>
</span><span id="Queue-179"><a href="#Queue-179"><span class="linenos">179</span></a>                <span class="k">raise</span>
</span><span id="Queue-180"><a href="#Queue-180"><span class="linenos">180</span></a>
</span><span id="Queue-181"><a href="#Queue-181"><span class="linenos">181</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_nowait</span><span class="p">()</span>
</span><span id="Queue-182"><a href="#Queue-182"><span class="linenos">182</span></a>
</span><span id="Queue-183"><a href="#Queue-183"><span class="linenos">183</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">T</span><span class="p">):</span>
</span><span id="Queue-184"><a href="#Queue-184"><span class="linenos">184</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Put an item into the queue.</span>
</span><span id="Queue-185"><a href="#Queue-185"><span class="linenos">185</span></a>
</span><span id="Queue-186"><a href="#Queue-186"><span class="linenos">186</span></a><span class="sd">        If the queue is full, wait until a free slot is available before adding</span>
</span><span id="Queue-187"><a href="#Queue-187"><span class="linenos">187</span></a><span class="sd">        the item.</span>
</span><span id="Queue-188"><a href="#Queue-188"><span class="linenos">188</span></a>
</span><span id="Queue-189"><a href="#Queue-189"><span class="linenos">189</span></a><span class="sd">        Raises:</span>
</span><span id="Queue-190"><a href="#Queue-190"><span class="linenos">190</span></a><span class="sd">            QueueClosedError</span>
</span><span id="Queue-191"><a href="#Queue-191"><span class="linenos">191</span></a>
</span><span id="Queue-192"><a href="#Queue-192"><span class="linenos">192</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Queue-193"><a href="#Queue-193"><span class="linenos">193</span></a>        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
</span><span id="Queue-194"><a href="#Queue-194"><span class="linenos">194</span></a>
</span><span id="Queue-195"><a href="#Queue-195"><span class="linenos">195</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">full</span><span class="p">():</span>
</span><span id="Queue-196"><a href="#Queue-196"><span class="linenos">196</span></a>            <span class="n">putter</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>
</span><span id="Queue-197"><a href="#Queue-197"><span class="linenos">197</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_putters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">putter</span><span class="p">)</span>
</span><span id="Queue-198"><a href="#Queue-198"><span class="linenos">198</span></a>
</span><span id="Queue-199"><a href="#Queue-199"><span class="linenos">199</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Queue-200"><a href="#Queue-200"><span class="linenos">200</span></a>                <span class="k">await</span> <span class="n">putter</span>
</span><span id="Queue-201"><a href="#Queue-201"><span class="linenos">201</span></a>
</span><span id="Queue-202"><a href="#Queue-202"><span class="linenos">202</span></a>            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
</span><span id="Queue-203"><a href="#Queue-203"><span class="linenos">203</span></a>                <span class="n">putter</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
</span><span id="Queue-204"><a href="#Queue-204"><span class="linenos">204</span></a>
</span><span id="Queue-205"><a href="#Queue-205"><span class="linenos">205</span></a>                <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
</span><span id="Queue-206"><a href="#Queue-206"><span class="linenos">206</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_putters</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">putter</span><span class="p">)</span>
</span><span id="Queue-207"><a href="#Queue-207"><span class="linenos">207</span></a>
</span><span id="Queue-208"><a href="#Queue-208"><span class="linenos">208</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">full</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">putter</span><span class="o">.</span><span class="n">cancelled</span><span class="p">():</span>
</span><span id="Queue-209"><a href="#Queue-209"><span class="linenos">209</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_putters</span><span class="p">)</span>
</span><span id="Queue-210"><a href="#Queue-210"><span class="linenos">210</span></a>
</span><span id="Queue-211"><a href="#Queue-211"><span class="linenos">211</span></a>                <span class="k">raise</span>
</span><span id="Queue-212"><a href="#Queue-212"><span class="linenos">212</span></a>
</span><span id="Queue-213"><a href="#Queue-213"><span class="linenos">213</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">put_nowait</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="Queue-214"><a href="#Queue-214"><span class="linenos">214</span></a>
</span><span id="Queue-215"><a href="#Queue-215"><span class="linenos">215</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_until_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="Queue-216"><a href="#Queue-216"><span class="linenos">216</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Empty the queue and return the last item.</span>
</span><span id="Queue-217"><a href="#Queue-217"><span class="linenos">217</span></a>
</span><span id="Queue-218"><a href="#Queue-218"><span class="linenos">218</span></a><span class="sd">        If queue is empty, wait until at least one item is available.</span>
</span><span id="Queue-219"><a href="#Queue-219"><span class="linenos">219</span></a>
</span><span id="Queue-220"><a href="#Queue-220"><span class="linenos">220</span></a><span class="sd">        Raises:</span>
</span><span id="Queue-221"><a href="#Queue-221"><span class="linenos">221</span></a><span class="sd">            QueueClosedError</span>
</span><span id="Queue-222"><a href="#Queue-222"><span class="linenos">222</span></a>
</span><span id="Queue-223"><a href="#Queue-223"><span class="linenos">223</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Queue-224"><a href="#Queue-224"><span class="linenos">224</span></a>        <span class="n">item</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span><span id="Queue-225"><a href="#Queue-225"><span class="linenos">225</span></a>
</span><span id="Queue-226"><a href="#Queue-226"><span class="linenos">226</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
</span><span id="Queue-227"><a href="#Queue-227"><span class="linenos">227</span></a>            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_nowait</span><span class="p">()</span>
</span><span id="Queue-228"><a href="#Queue-228"><span class="linenos">228</span></a>
</span><span id="Queue-229"><a href="#Queue-229"><span class="linenos">229</span></a>        <span class="k">return</span> <span class="n">item</span>
</span><span id="Queue-230"><a href="#Queue-230"><span class="linenos">230</span></a>
</span><span id="Queue-231"><a href="#Queue-231"><span class="linenos">231</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_nowait_until_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="Queue-232"><a href="#Queue-232"><span class="linenos">232</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Empty the queue and return the last item if at least one</span>
</span><span id="Queue-233"><a href="#Queue-233"><span class="linenos">233</span></a><span class="sd">        item is immediately available, else raise `QueueEmptyError`.</span>
</span><span id="Queue-234"><a href="#Queue-234"><span class="linenos">234</span></a>
</span><span id="Queue-235"><a href="#Queue-235"><span class="linenos">235</span></a><span class="sd">        Raises:</span>
</span><span id="Queue-236"><a href="#Queue-236"><span class="linenos">236</span></a><span class="sd">            QueueEmptyError</span>
</span><span id="Queue-237"><a href="#Queue-237"><span class="linenos">237</span></a>
</span><span id="Queue-238"><a href="#Queue-238"><span class="linenos">238</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Queue-239"><a href="#Queue-239"><span class="linenos">239</span></a>        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_nowait</span><span class="p">()</span>
</span><span id="Queue-240"><a href="#Queue-240"><span class="linenos">240</span></a>
</span><span id="Queue-241"><a href="#Queue-241"><span class="linenos">241</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
</span><span id="Queue-242"><a href="#Queue-242"><span class="linenos">242</span></a>            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_nowait</span><span class="p">()</span>
</span><span id="Queue-243"><a href="#Queue-243"><span class="linenos">243</span></a>
</span><span id="Queue-244"><a href="#Queue-244"><span class="linenos">244</span></a>        <span class="k">return</span> <span class="n">item</span>
</span><span id="Queue-245"><a href="#Queue-245"><span class="linenos">245</span></a>
</span><span id="Queue-246"><a href="#Queue-246"><span class="linenos">246</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_wakeup_next</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">waiters</span><span class="p">):</span>
</span><span id="Queue-247"><a href="#Queue-247"><span class="linenos">247</span></a>        <span class="k">while</span> <span class="n">waiters</span><span class="p">:</span>
</span><span id="Queue-248"><a href="#Queue-248"><span class="linenos">248</span></a>            <span class="n">waiter</span> <span class="o">=</span> <span class="n">waiters</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
</span><span id="Queue-249"><a href="#Queue-249"><span class="linenos">249</span></a>
</span><span id="Queue-250"><a href="#Queue-250"><span class="linenos">250</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">waiter</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="Queue-251"><a href="#Queue-251"><span class="linenos">251</span></a>                <span class="n">waiter</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Queue-252"><a href="#Queue-252"><span class="linenos">252</span></a>                <span class="k">break</span>
</span><span id="Queue-253"><a href="#Queue-253"><span class="linenos">253</span></a>
</span><span id="Queue-254"><a href="#Queue-254"><span class="linenos">254</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_wakeup_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">waiters</span><span class="p">):</span>
</span><span id="Queue-255"><a href="#Queue-255"><span class="linenos">255</span></a>        <span class="k">while</span> <span class="n">waiters</span><span class="p">:</span>
</span><span id="Queue-256"><a href="#Queue-256"><span class="linenos">256</span></a>            <span class="n">waiter</span> <span class="o">=</span> <span class="n">waiters</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
</span><span id="Queue-257"><a href="#Queue-257"><span class="linenos">257</span></a>
</span><span id="Queue-258"><a href="#Queue-258"><span class="linenos">258</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">waiter</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
</span><span id="Queue-259"><a href="#Queue-259"><span class="linenos">259</span></a>                <span class="n">waiter</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Asyncio queue which implements AsyncIterable and can be closed.</p>

<p>Interface and implementation are based on <code>asyncio.Queue</code>.</p>

<p>If <code><a href="#Queue.maxsize">maxsize</a></code> is less than or equal to zero, the queue size is infinite.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>maxsize:</strong>  maximum number of items in the queue</li>
</ul>

<p>Example::</p>

<pre><code>queue = Queue(maxsize=1)

async def producer():
    for i in range(4):
        await queue.put(i)
    queue.close()

async def consumer():
    result = 0
    async for i in queue:
        result += i
    return result

asyncio.ensure_future(producer())
result = await consumer()
assert result == 6
</code></pre>
</div>


                            <div id="Queue.__init__" class="classattr">
                                        <input id="Queue.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Queue</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">maxsize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span></span>)</span>

                <label class="view-source-button" for="Queue.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.__init__-54"><a href="#Queue.__init__-54"><span class="linenos">54</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Queue.__init__-55"><a href="#Queue.__init__-55"><span class="linenos">55</span></a>                 <span class="n">maxsize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="Queue.__init__-56"><a href="#Queue.__init__-56"><span class="linenos">56</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_maxsize</span> <span class="o">=</span> <span class="n">maxsize</span>
</span><span id="Queue.__init__-57"><a href="#Queue.__init__-57"><span class="linenos">57</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">deque</span><span class="p">()</span>
</span><span id="Queue.__init__-58"><a href="#Queue.__init__-58"><span class="linenos">58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_getters</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">deque</span><span class="p">()</span>
</span><span id="Queue.__init__-59"><a href="#Queue.__init__-59"><span class="linenos">59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_putters</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">deque</span><span class="p">()</span>
</span><span id="Queue.__init__-60"><a href="#Queue.__init__-60"><span class="linenos">60</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">False</span>
</span></pre></div>


    

                            </div>
                            <div id="Queue.maxsize" class="classattr">
                                        <input id="Queue.maxsize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">maxsize</span><span class="annotation">: int</span>

                <label class="view-source-button" for="Queue.maxsize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.maxsize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.maxsize-80"><a href="#Queue.maxsize-80"><span class="linenos">80</span></a>    <span class="nd">@property</span>
</span><span id="Queue.maxsize-81"><a href="#Queue.maxsize-81"><span class="linenos">81</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">maxsize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Queue.maxsize-82"><a href="#Queue.maxsize-82"><span class="linenos">82</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Maximum number of items in the queue.&quot;&quot;&quot;</span>
</span><span id="Queue.maxsize-83"><a href="#Queue.maxsize-83"><span class="linenos">83</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxsize</span>
</span></pre></div>


            <div class="docstring"><p>Maximum number of items in the queue.</p>
</div>


                            </div>
                            <div id="Queue.is_closed" class="classattr">
                                        <input id="Queue.is_closed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">is_closed</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Queue.is_closed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.is_closed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.is_closed-85"><a href="#Queue.is_closed-85"><span class="linenos">85</span></a>    <span class="nd">@property</span>
</span><span id="Queue.is_closed-86"><a href="#Queue.is_closed-86"><span class="linenos">86</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Queue.is_closed-87"><a href="#Queue.is_closed-87"><span class="linenos">87</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Is queue closed.&quot;&quot;&quot;</span>
</span><span id="Queue.is_closed-88"><a href="#Queue.is_closed-88"><span class="linenos">88</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span>
</span></pre></div>


            <div class="docstring"><p>Is queue closed.</p>
</div>


                            </div>
                            <div id="Queue.empty" class="classattr">
                                        <input id="Queue.empty-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">empty</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Queue.empty-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.empty"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.empty-90"><a href="#Queue.empty-90"><span class="linenos">90</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Queue.empty-91"><a href="#Queue.empty-91"><span class="linenos">91</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;``True`` if queue is empty, ``False`` otherwise.&quot;&quot;&quot;</span>
</span><span id="Queue.empty-92"><a href="#Queue.empty-92"><span class="linenos">92</span></a>        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span>
</span></pre></div>


            <div class="docstring"><p><code>True</code> if queue is empty, <code>False</code> otherwise.</p>
</div>


                            </div>
                            <div id="Queue.full" class="classattr">
                                        <input id="Queue.full-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">full</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Queue.full-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.full"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.full-94"><a href="#Queue.full-94"><span class="linenos">94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">full</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Queue.full-95"><a href="#Queue.full-95"><span class="linenos">95</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;``True`` if queue is full, ``False`` otherwise.&quot;&quot;&quot;</span>
</span><span id="Queue.full-96"><a href="#Queue.full-96"><span class="linenos">96</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxsize</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Queue.full-97"><a href="#Queue.full-97"><span class="linenos">97</span></a>            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxsize</span>
</span><span id="Queue.full-98"><a href="#Queue.full-98"><span class="linenos">98</span></a>
</span><span id="Queue.full-99"><a href="#Queue.full-99"><span class="linenos">99</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p><code>True</code> if queue is full, <code>False</code> otherwise.</p>
</div>


                            </div>
                            <div id="Queue.qsize" class="classattr">
                                        <input id="Queue.qsize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">qsize</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="Queue.qsize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.qsize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.qsize-101"><a href="#Queue.qsize-101"><span class="linenos">101</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">qsize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Queue.qsize-102"><a href="#Queue.qsize-102"><span class="linenos">102</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Number of items currently in the queue.&quot;&quot;&quot;</span>
</span><span id="Queue.qsize-103"><a href="#Queue.qsize-103"><span class="linenos">103</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Number of items currently in the queue.</p>
</div>


                            </div>
                            <div id="Queue.close" class="classattr">
                                        <input id="Queue.close-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">close</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Queue.close-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.close"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.close-105"><a href="#Queue.close-105"><span class="linenos">105</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Queue.close-106"><a href="#Queue.close-106"><span class="linenos">106</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Close the queue.&quot;&quot;&quot;</span>
</span><span id="Queue.close-107"><a href="#Queue.close-107"><span class="linenos">107</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
</span><span id="Queue.close-108"><a href="#Queue.close-108"><span class="linenos">108</span></a>            <span class="k">return</span>
</span><span id="Queue.close-109"><a href="#Queue.close-109"><span class="linenos">109</span></a>
</span><span id="Queue.close-110"><a href="#Queue.close-110"><span class="linenos">110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Queue.close-111"><a href="#Queue.close-111"><span class="linenos">111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_putters</span><span class="p">)</span>
</span><span id="Queue.close-112"><a href="#Queue.close-112"><span class="linenos">112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getters</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Close the queue.</p>
</div>


                            </div>
                            <div id="Queue.get_nowait" class="classattr">
                                        <input id="Queue.get_nowait-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_nowait</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="o">~</span><span class="n">T</span>:</span></span>

                <label class="view-source-button" for="Queue.get_nowait-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.get_nowait"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.get_nowait-114"><a href="#Queue.get_nowait-114"><span class="linenos">114</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_nowait</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="Queue.get_nowait-115"><a href="#Queue.get_nowait-115"><span class="linenos">115</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an item if one is immediately available, else raise</span>
</span><span id="Queue.get_nowait-116"><a href="#Queue.get_nowait-116"><span class="linenos">116</span></a><span class="sd">        `QueueEmptyError`.</span>
</span><span id="Queue.get_nowait-117"><a href="#Queue.get_nowait-117"><span class="linenos">117</span></a>
</span><span id="Queue.get_nowait-118"><a href="#Queue.get_nowait-118"><span class="linenos">118</span></a><span class="sd">        Raises:</span>
</span><span id="Queue.get_nowait-119"><a href="#Queue.get_nowait-119"><span class="linenos">119</span></a><span class="sd">            QueueEmptyError</span>
</span><span id="Queue.get_nowait-120"><a href="#Queue.get_nowait-120"><span class="linenos">120</span></a>
</span><span id="Queue.get_nowait-121"><a href="#Queue.get_nowait-121"><span class="linenos">121</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Queue.get_nowait-122"><a href="#Queue.get_nowait-122"><span class="linenos">122</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
</span><span id="Queue.get_nowait-123"><a href="#Queue.get_nowait-123"><span class="linenos">123</span></a>            <span class="k">raise</span> <span class="n">QueueEmptyError</span><span class="p">()</span>
</span><span id="Queue.get_nowait-124"><a href="#Queue.get_nowait-124"><span class="linenos">124</span></a>
</span><span id="Queue.get_nowait-125"><a href="#Queue.get_nowait-125"><span class="linenos">125</span></a>        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
</span><span id="Queue.get_nowait-126"><a href="#Queue.get_nowait-126"><span class="linenos">126</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_putters</span><span class="p">)</span>
</span><span id="Queue.get_nowait-127"><a href="#Queue.get_nowait-127"><span class="linenos">127</span></a>        <span class="k">return</span> <span class="n">item</span>
</span></pre></div>


            <div class="docstring"><p>Return an item if one is immediately available, else raise
<code><a href="#QueueEmptyError">QueueEmptyError</a></code>.</p>

<h6 id="raises">Raises:</h6>

<ul>
<li>QueueEmptyError</li>
</ul>
</div>


                            </div>
                            <div id="Queue.put_nowait" class="classattr">
                                        <input id="Queue.put_nowait-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">put_nowait</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">item</span><span class="p">:</span> <span class="o">~</span><span class="n">T</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Queue.put_nowait-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.put_nowait"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.put_nowait-129"><a href="#Queue.put_nowait-129"><span class="linenos">129</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">put_nowait</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">T</span><span class="p">):</span>
</span><span id="Queue.put_nowait-130"><a href="#Queue.put_nowait-130"><span class="linenos">130</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Put an item into the queue without blocking.</span>
</span><span id="Queue.put_nowait-131"><a href="#Queue.put_nowait-131"><span class="linenos">131</span></a>
</span><span id="Queue.put_nowait-132"><a href="#Queue.put_nowait-132"><span class="linenos">132</span></a><span class="sd">        If no free slot is immediately available, raise `QueueFullError`.</span>
</span><span id="Queue.put_nowait-133"><a href="#Queue.put_nowait-133"><span class="linenos">133</span></a>
</span><span id="Queue.put_nowait-134"><a href="#Queue.put_nowait-134"><span class="linenos">134</span></a><span class="sd">        Raises:</span>
</span><span id="Queue.put_nowait-135"><a href="#Queue.put_nowait-135"><span class="linenos">135</span></a><span class="sd">            QueueFullError</span>
</span><span id="Queue.put_nowait-136"><a href="#Queue.put_nowait-136"><span class="linenos">136</span></a>
</span><span id="Queue.put_nowait-137"><a href="#Queue.put_nowait-137"><span class="linenos">137</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Queue.put_nowait-138"><a href="#Queue.put_nowait-138"><span class="linenos">138</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
</span><span id="Queue.put_nowait-139"><a href="#Queue.put_nowait-139"><span class="linenos">139</span></a>            <span class="k">raise</span> <span class="n">QueueClosedError</span><span class="p">()</span>
</span><span id="Queue.put_nowait-140"><a href="#Queue.put_nowait-140"><span class="linenos">140</span></a>
</span><span id="Queue.put_nowait-141"><a href="#Queue.put_nowait-141"><span class="linenos">141</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">full</span><span class="p">():</span>
</span><span id="Queue.put_nowait-142"><a href="#Queue.put_nowait-142"><span class="linenos">142</span></a>            <span class="k">raise</span> <span class="n">QueueFullError</span><span class="p">()</span>
</span><span id="Queue.put_nowait-143"><a href="#Queue.put_nowait-143"><span class="linenos">143</span></a>
</span><span id="Queue.put_nowait-144"><a href="#Queue.put_nowait-144"><span class="linenos">144</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="Queue.put_nowait-145"><a href="#Queue.put_nowait-145"><span class="linenos">145</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getters</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Put an item into the queue without blocking.</p>

<p>If no free slot is immediately available, raise <code><a href="#QueueFullError">QueueFullError</a></code>.</p>

<h6 id="raises">Raises:</h6>

<ul>
<li>QueueFullError</li>
</ul>
</div>


                            </div>
                            <div id="Queue.get" class="classattr">
                                        <input id="Queue.get-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">get</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="o">~</span><span class="n">T</span>:</span></span>

                <label class="view-source-button" for="Queue.get-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.get"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.get-147"><a href="#Queue.get-147"><span class="linenos">147</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="Queue.get-148"><a href="#Queue.get-148"><span class="linenos">148</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove and return an item from the queue.</span>
</span><span id="Queue.get-149"><a href="#Queue.get-149"><span class="linenos">149</span></a>
</span><span id="Queue.get-150"><a href="#Queue.get-150"><span class="linenos">150</span></a><span class="sd">        If queue is empty, wait until an item is available.</span>
</span><span id="Queue.get-151"><a href="#Queue.get-151"><span class="linenos">151</span></a>
</span><span id="Queue.get-152"><a href="#Queue.get-152"><span class="linenos">152</span></a><span class="sd">        Raises:</span>
</span><span id="Queue.get-153"><a href="#Queue.get-153"><span class="linenos">153</span></a><span class="sd">            QueueClosedError</span>
</span><span id="Queue.get-154"><a href="#Queue.get-154"><span class="linenos">154</span></a>
</span><span id="Queue.get-155"><a href="#Queue.get-155"><span class="linenos">155</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Queue.get-156"><a href="#Queue.get-156"><span class="linenos">156</span></a>        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
</span><span id="Queue.get-157"><a href="#Queue.get-157"><span class="linenos">157</span></a>
</span><span id="Queue.get-158"><a href="#Queue.get-158"><span class="linenos">158</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
</span><span id="Queue.get-159"><a href="#Queue.get-159"><span class="linenos">159</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
</span><span id="Queue.get-160"><a href="#Queue.get-160"><span class="linenos">160</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getters</span><span class="p">)</span>
</span><span id="Queue.get-161"><a href="#Queue.get-161"><span class="linenos">161</span></a>                <span class="k">raise</span> <span class="n">QueueClosedError</span><span class="p">()</span>
</span><span id="Queue.get-162"><a href="#Queue.get-162"><span class="linenos">162</span></a>
</span><span id="Queue.get-163"><a href="#Queue.get-163"><span class="linenos">163</span></a>            <span class="n">getter</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>
</span><span id="Queue.get-164"><a href="#Queue.get-164"><span class="linenos">164</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_getters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">getter</span><span class="p">)</span>
</span><span id="Queue.get-165"><a href="#Queue.get-165"><span class="linenos">165</span></a>
</span><span id="Queue.get-166"><a href="#Queue.get-166"><span class="linenos">166</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Queue.get-167"><a href="#Queue.get-167"><span class="linenos">167</span></a>                <span class="k">await</span> <span class="n">getter</span>
</span><span id="Queue.get-168"><a href="#Queue.get-168"><span class="linenos">168</span></a>
</span><span id="Queue.get-169"><a href="#Queue.get-169"><span class="linenos">169</span></a>            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
</span><span id="Queue.get-170"><a href="#Queue.get-170"><span class="linenos">170</span></a>                <span class="n">getter</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
</span><span id="Queue.get-171"><a href="#Queue.get-171"><span class="linenos">171</span></a>
</span><span id="Queue.get-172"><a href="#Queue.get-172"><span class="linenos">172</span></a>                <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
</span><span id="Queue.get-173"><a href="#Queue.get-173"><span class="linenos">173</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_getters</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">getter</span><span class="p">)</span>
</span><span id="Queue.get-174"><a href="#Queue.get-174"><span class="linenos">174</span></a>
</span><span id="Queue.get-175"><a href="#Queue.get-175"><span class="linenos">175</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">getter</span><span class="o">.</span><span class="n">cancelled</span><span class="p">():</span>
</span><span id="Queue.get-176"><a href="#Queue.get-176"><span class="linenos">176</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span><span class="p">:</span>
</span><span id="Queue.get-177"><a href="#Queue.get-177"><span class="linenos">177</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getters</span><span class="p">)</span>
</span><span id="Queue.get-178"><a href="#Queue.get-178"><span class="linenos">178</span></a>
</span><span id="Queue.get-179"><a href="#Queue.get-179"><span class="linenos">179</span></a>                <span class="k">raise</span>
</span><span id="Queue.get-180"><a href="#Queue.get-180"><span class="linenos">180</span></a>
</span><span id="Queue.get-181"><a href="#Queue.get-181"><span class="linenos">181</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_nowait</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Remove and return an item from the queue.</p>

<p>If queue is empty, wait until an item is available.</p>

<h6 id="raises">Raises:</h6>

<ul>
<li>QueueClosedError</li>
</ul>
</div>


                            </div>
                            <div id="Queue.put" class="classattr">
                                        <input id="Queue.put-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">put</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">item</span><span class="p">:</span> <span class="o">~</span><span class="n">T</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Queue.put-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.put"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.put-183"><a href="#Queue.put-183"><span class="linenos">183</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">T</span><span class="p">):</span>
</span><span id="Queue.put-184"><a href="#Queue.put-184"><span class="linenos">184</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Put an item into the queue.</span>
</span><span id="Queue.put-185"><a href="#Queue.put-185"><span class="linenos">185</span></a>
</span><span id="Queue.put-186"><a href="#Queue.put-186"><span class="linenos">186</span></a><span class="sd">        If the queue is full, wait until a free slot is available before adding</span>
</span><span id="Queue.put-187"><a href="#Queue.put-187"><span class="linenos">187</span></a><span class="sd">        the item.</span>
</span><span id="Queue.put-188"><a href="#Queue.put-188"><span class="linenos">188</span></a>
</span><span id="Queue.put-189"><a href="#Queue.put-189"><span class="linenos">189</span></a><span class="sd">        Raises:</span>
</span><span id="Queue.put-190"><a href="#Queue.put-190"><span class="linenos">190</span></a><span class="sd">            QueueClosedError</span>
</span><span id="Queue.put-191"><a href="#Queue.put-191"><span class="linenos">191</span></a>
</span><span id="Queue.put-192"><a href="#Queue.put-192"><span class="linenos">192</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Queue.put-193"><a href="#Queue.put-193"><span class="linenos">193</span></a>        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
</span><span id="Queue.put-194"><a href="#Queue.put-194"><span class="linenos">194</span></a>
</span><span id="Queue.put-195"><a href="#Queue.put-195"><span class="linenos">195</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_closed</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">full</span><span class="p">():</span>
</span><span id="Queue.put-196"><a href="#Queue.put-196"><span class="linenos">196</span></a>            <span class="n">putter</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">create_future</span><span class="p">()</span>
</span><span id="Queue.put-197"><a href="#Queue.put-197"><span class="linenos">197</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_putters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">putter</span><span class="p">)</span>
</span><span id="Queue.put-198"><a href="#Queue.put-198"><span class="linenos">198</span></a>
</span><span id="Queue.put-199"><a href="#Queue.put-199"><span class="linenos">199</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Queue.put-200"><a href="#Queue.put-200"><span class="linenos">200</span></a>                <span class="k">await</span> <span class="n">putter</span>
</span><span id="Queue.put-201"><a href="#Queue.put-201"><span class="linenos">201</span></a>
</span><span id="Queue.put-202"><a href="#Queue.put-202"><span class="linenos">202</span></a>            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
</span><span id="Queue.put-203"><a href="#Queue.put-203"><span class="linenos">203</span></a>                <span class="n">putter</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
</span><span id="Queue.put-204"><a href="#Queue.put-204"><span class="linenos">204</span></a>
</span><span id="Queue.put-205"><a href="#Queue.put-205"><span class="linenos">205</span></a>                <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
</span><span id="Queue.put-206"><a href="#Queue.put-206"><span class="linenos">206</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_putters</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">putter</span><span class="p">)</span>
</span><span id="Queue.put-207"><a href="#Queue.put-207"><span class="linenos">207</span></a>
</span><span id="Queue.put-208"><a href="#Queue.put-208"><span class="linenos">208</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">full</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">putter</span><span class="o">.</span><span class="n">cancelled</span><span class="p">():</span>
</span><span id="Queue.put-209"><a href="#Queue.put-209"><span class="linenos">209</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_wakeup_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_putters</span><span class="p">)</span>
</span><span id="Queue.put-210"><a href="#Queue.put-210"><span class="linenos">210</span></a>
</span><span id="Queue.put-211"><a href="#Queue.put-211"><span class="linenos">211</span></a>                <span class="k">raise</span>
</span><span id="Queue.put-212"><a href="#Queue.put-212"><span class="linenos">212</span></a>
</span><span id="Queue.put-213"><a href="#Queue.put-213"><span class="linenos">213</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">put_nowait</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Put an item into the queue.</p>

<p>If the queue is full, wait until a free slot is available before adding
the item.</p>

<h6 id="raises">Raises:</h6>

<ul>
<li>QueueClosedError</li>
</ul>
</div>


                            </div>
                            <div id="Queue.get_until_empty" class="classattr">
                                        <input id="Queue.get_until_empty-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">get_until_empty</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="o">~</span><span class="n">T</span>:</span></span>

                <label class="view-source-button" for="Queue.get_until_empty-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.get_until_empty"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.get_until_empty-215"><a href="#Queue.get_until_empty-215"><span class="linenos">215</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_until_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="Queue.get_until_empty-216"><a href="#Queue.get_until_empty-216"><span class="linenos">216</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Empty the queue and return the last item.</span>
</span><span id="Queue.get_until_empty-217"><a href="#Queue.get_until_empty-217"><span class="linenos">217</span></a>
</span><span id="Queue.get_until_empty-218"><a href="#Queue.get_until_empty-218"><span class="linenos">218</span></a><span class="sd">        If queue is empty, wait until at least one item is available.</span>
</span><span id="Queue.get_until_empty-219"><a href="#Queue.get_until_empty-219"><span class="linenos">219</span></a>
</span><span id="Queue.get_until_empty-220"><a href="#Queue.get_until_empty-220"><span class="linenos">220</span></a><span class="sd">        Raises:</span>
</span><span id="Queue.get_until_empty-221"><a href="#Queue.get_until_empty-221"><span class="linenos">221</span></a><span class="sd">            QueueClosedError</span>
</span><span id="Queue.get_until_empty-222"><a href="#Queue.get_until_empty-222"><span class="linenos">222</span></a>
</span><span id="Queue.get_until_empty-223"><a href="#Queue.get_until_empty-223"><span class="linenos">223</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Queue.get_until_empty-224"><a href="#Queue.get_until_empty-224"><span class="linenos">224</span></a>        <span class="n">item</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span><span id="Queue.get_until_empty-225"><a href="#Queue.get_until_empty-225"><span class="linenos">225</span></a>
</span><span id="Queue.get_until_empty-226"><a href="#Queue.get_until_empty-226"><span class="linenos">226</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
</span><span id="Queue.get_until_empty-227"><a href="#Queue.get_until_empty-227"><span class="linenos">227</span></a>            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_nowait</span><span class="p">()</span>
</span><span id="Queue.get_until_empty-228"><a href="#Queue.get_until_empty-228"><span class="linenos">228</span></a>
</span><span id="Queue.get_until_empty-229"><a href="#Queue.get_until_empty-229"><span class="linenos">229</span></a>        <span class="k">return</span> <span class="n">item</span>
</span></pre></div>


            <div class="docstring"><p>Empty the queue and return the last item.</p>

<p>If queue is empty, wait until at least one item is available.</p>

<h6 id="raises">Raises:</h6>

<ul>
<li>QueueClosedError</li>
</ul>
</div>


                            </div>
                            <div id="Queue.get_nowait_until_empty" class="classattr">
                                        <input id="Queue.get_nowait_until_empty-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_nowait_until_empty</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="o">~</span><span class="n">T</span>:</span></span>

                <label class="view-source-button" for="Queue.get_nowait_until_empty-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Queue.get_nowait_until_empty"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Queue.get_nowait_until_empty-231"><a href="#Queue.get_nowait_until_empty-231"><span class="linenos">231</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_nowait_until_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="Queue.get_nowait_until_empty-232"><a href="#Queue.get_nowait_until_empty-232"><span class="linenos">232</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Empty the queue and return the last item if at least one</span>
</span><span id="Queue.get_nowait_until_empty-233"><a href="#Queue.get_nowait_until_empty-233"><span class="linenos">233</span></a><span class="sd">        item is immediately available, else raise `QueueEmptyError`.</span>
</span><span id="Queue.get_nowait_until_empty-234"><a href="#Queue.get_nowait_until_empty-234"><span class="linenos">234</span></a>
</span><span id="Queue.get_nowait_until_empty-235"><a href="#Queue.get_nowait_until_empty-235"><span class="linenos">235</span></a><span class="sd">        Raises:</span>
</span><span id="Queue.get_nowait_until_empty-236"><a href="#Queue.get_nowait_until_empty-236"><span class="linenos">236</span></a><span class="sd">            QueueEmptyError</span>
</span><span id="Queue.get_nowait_until_empty-237"><a href="#Queue.get_nowait_until_empty-237"><span class="linenos">237</span></a>
</span><span id="Queue.get_nowait_until_empty-238"><a href="#Queue.get_nowait_until_empty-238"><span class="linenos">238</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Queue.get_nowait_until_empty-239"><a href="#Queue.get_nowait_until_empty-239"><span class="linenos">239</span></a>        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_nowait</span><span class="p">()</span>
</span><span id="Queue.get_nowait_until_empty-240"><a href="#Queue.get_nowait_until_empty-240"><span class="linenos">240</span></a>
</span><span id="Queue.get_nowait_until_empty-241"><a href="#Queue.get_nowait_until_empty-241"><span class="linenos">241</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
</span><span id="Queue.get_nowait_until_empty-242"><a href="#Queue.get_nowait_until_empty-242"><span class="linenos">242</span></a>            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_nowait</span><span class="p">()</span>
</span><span id="Queue.get_nowait_until_empty-243"><a href="#Queue.get_nowait_until_empty-243"><span class="linenos">243</span></a>
</span><span id="Queue.get_nowait_until_empty-244"><a href="#Queue.get_nowait_until_empty-244"><span class="linenos">244</span></a>        <span class="k">return</span> <span class="n">item</span>
</span></pre></div>


            <div class="docstring"><p>Empty the queue and return the last item if at least one
item is immediately available, else raise <code><a href="#QueueEmptyError">QueueEmptyError</a></code>.</p>

<h6 id="raises">Raises:</h6>

<ul>
<li>QueueEmptyError</li>
</ul>
</div>


                            </div>
                </section>
                <section id="CancelledWithResultError">
                            <input id="CancelledWithResultError-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CancelledWithResultError</span><wbr>(<span class="base">asyncio.exceptions.CancelledError</span>):

                <label class="view-source-button" for="CancelledWithResultError-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CancelledWithResultError"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CancelledWithResultError-13"><a href="#CancelledWithResultError-13"><span class="linenos">13</span></a><span class="k">class</span><span class="w"> </span><span class="nc">CancelledWithResultError</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">):</span>
</span><span id="CancelledWithResultError-14"><a href="#CancelledWithResultError-14"><span class="linenos">14</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;CancelledError with associated result or exception&quot;&quot;&quot;</span>
</span><span id="CancelledWithResultError-15"><a href="#CancelledWithResultError-15"><span class="linenos">15</span></a>
</span><span id="CancelledWithResultError-16"><a href="#CancelledWithResultError-16"><span class="linenos">16</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="CancelledWithResultError-17"><a href="#CancelledWithResultError-17"><span class="linenos">17</span></a>                 <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CancelledWithResultError-18"><a href="#CancelledWithResultError-18"><span class="linenos">18</span></a>                 <span class="n">exception</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="CancelledWithResultError-19"><a href="#CancelledWithResultError-19"><span class="linenos">19</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="CancelledWithResultError-20"><a href="#CancelledWithResultError-20"><span class="linenos">20</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__result</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="CancelledWithResultError-21"><a href="#CancelledWithResultError-21"><span class="linenos">21</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__exception</span> <span class="o">=</span> <span class="n">exception</span>
</span><span id="CancelledWithResultError-22"><a href="#CancelledWithResultError-22"><span class="linenos">22</span></a>
</span><span id="CancelledWithResultError-23"><a href="#CancelledWithResultError-23"><span class="linenos">23</span></a>    <span class="nd">@property</span>
</span><span id="CancelledWithResultError-24"><a href="#CancelledWithResultError-24"><span class="linenos">24</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">result</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CancelledWithResultError-25"><a href="#CancelledWithResultError-25"><span class="linenos">25</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Result&quot;&quot;&quot;</span>
</span><span id="CancelledWithResultError-26"><a href="#CancelledWithResultError-26"><span class="linenos">26</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__result</span>
</span><span id="CancelledWithResultError-27"><a href="#CancelledWithResultError-27"><span class="linenos">27</span></a>
</span><span id="CancelledWithResultError-28"><a href="#CancelledWithResultError-28"><span class="linenos">28</span></a>    <span class="nd">@property</span>
</span><span id="CancelledWithResultError-29"><a href="#CancelledWithResultError-29"><span class="linenos">29</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">exception</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CancelledWithResultError-30"><a href="#CancelledWithResultError-30"><span class="linenos">30</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__exception</span>
</span></pre></div>


            <div class="docstring"><p>CancelledError with associated result or exception</p>
</div>


                            <div id="CancelledWithResultError.__init__" class="classattr">
                                        <input id="CancelledWithResultError.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CancelledWithResultError</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span>, </span><span class="param"><span class="n">exception</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="CancelledWithResultError.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CancelledWithResultError.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CancelledWithResultError.__init__-16"><a href="#CancelledWithResultError.__init__-16"><span class="linenos">16</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="CancelledWithResultError.__init__-17"><a href="#CancelledWithResultError.__init__-17"><span class="linenos">17</span></a>                 <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CancelledWithResultError.__init__-18"><a href="#CancelledWithResultError.__init__-18"><span class="linenos">18</span></a>                 <span class="n">exception</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="CancelledWithResultError.__init__-19"><a href="#CancelledWithResultError.__init__-19"><span class="linenos">19</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="CancelledWithResultError.__init__-20"><a href="#CancelledWithResultError.__init__-20"><span class="linenos">20</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__result</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="CancelledWithResultError.__init__-21"><a href="#CancelledWithResultError.__init__-21"><span class="linenos">21</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__exception</span> <span class="o">=</span> <span class="n">exception</span>
</span></pre></div>


    

                            </div>
                            <div id="CancelledWithResultError.result" class="classattr">
                                        <input id="CancelledWithResultError.result-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">result</span><span class="annotation">: typing.Any | None</span>

                <label class="view-source-button" for="CancelledWithResultError.result-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CancelledWithResultError.result"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CancelledWithResultError.result-23"><a href="#CancelledWithResultError.result-23"><span class="linenos">23</span></a>    <span class="nd">@property</span>
</span><span id="CancelledWithResultError.result-24"><a href="#CancelledWithResultError.result-24"><span class="linenos">24</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">result</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CancelledWithResultError.result-25"><a href="#CancelledWithResultError.result-25"><span class="linenos">25</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Result&quot;&quot;&quot;</span>
</span><span id="CancelledWithResultError.result-26"><a href="#CancelledWithResultError.result-26"><span class="linenos">26</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__result</span>
</span></pre></div>


            <div class="docstring"><p>Result</p>
</div>


                            </div>
                            <div id="CancelledWithResultError.exception" class="classattr">
                                        <input id="CancelledWithResultError.exception-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">exception</span><span class="annotation">: BaseException | None</span>

                <label class="view-source-button" for="CancelledWithResultError.exception-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CancelledWithResultError.exception"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CancelledWithResultError.exception-28"><a href="#CancelledWithResultError.exception-28"><span class="linenos">28</span></a>    <span class="nd">@property</span>
</span><span id="CancelledWithResultError.exception-29"><a href="#CancelledWithResultError.exception-29"><span class="linenos">29</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">exception</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CancelledWithResultError.exception-30"><a href="#CancelledWithResultError.exception-30"><span class="linenos">30</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__exception</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="wait_for">
                            <input id="wait_for-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">wait_for</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">obj</span><span class="p">:</span> <span class="n">Awaitable</span><span class="p">[</span><span class="o">~</span><span class="n">T</span><span class="p">]</span>, </span><span class="param"><span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="o">~</span><span class="n">T</span>:</span></span>

                <label class="view-source-button" for="wait_for-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#wait_for"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="wait_for-33"><a href="#wait_for-33"><span class="linenos">33</span></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait_for</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">T</span><span class="p">],</span>
</span><span id="wait_for-34"><a href="#wait_for-34"><span class="linenos">34</span></a>                   <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="wait_for-35"><a href="#wait_for-35"><span class="linenos">35</span></a>                   <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
</span><span id="wait_for-36"><a href="#wait_for-36"><span class="linenos">36</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;&quot;Wait for the awaitable object to complete, with timeout.</span>
</span><span id="wait_for-37"><a href="#wait_for-37"><span class="linenos">37</span></a>
</span><span id="wait_for-38"><a href="#wait_for-38"><span class="linenos">38</span></a><span class="sd">    Implementation `asyncio.wait_for` that ensure propagation of</span>
</span><span id="wait_for-39"><a href="#wait_for-39"><span class="linenos">39</span></a><span class="sd">    CancelledError.</span>
</span><span id="wait_for-40"><a href="#wait_for-40"><span class="linenos">40</span></a>
</span><span id="wait_for-41"><a href="#wait_for-41"><span class="linenos">41</span></a><span class="sd">    If task is cancelled with objects&#39;s result available, instead of</span>
</span><span id="wait_for-42"><a href="#wait_for-42"><span class="linenos">42</span></a><span class="sd">    returning result, this implementation raises `CancelledWithResultError`.</span>
</span><span id="wait_for-43"><a href="#wait_for-43"><span class="linenos">43</span></a>
</span><span id="wait_for-44"><a href="#wait_for-44"><span class="linenos">44</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="wait_for-45"><a href="#wait_for-45"><span class="linenos">45</span></a>    <span class="n">group</span> <span class="o">=</span> <span class="n">Group</span><span class="p">(</span><span class="n">log_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="wait_for-46"><a href="#wait_for-46"><span class="linenos">46</span></a>    <span class="n">group</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">call_on_done</span><span class="p">,</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span> <span class="n">group</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
</span><span id="wait_for-47"><a href="#wait_for-47"><span class="linenos">47</span></a>
</span><span id="wait_for-48"><a href="#wait_for-48"><span class="linenos">48</span></a>    <span class="n">task</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</span><span id="wait_for-49"><a href="#wait_for-49"><span class="linenos">49</span></a>    <span class="n">group</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">call_on_done</span><span class="p">,</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">shield</span><span class="p">(</span><span class="n">task</span><span class="p">),</span> <span class="n">group</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
</span><span id="wait_for-50"><a href="#wait_for-50"><span class="linenos">50</span></a>
</span><span id="wait_for-51"><a href="#wait_for-51"><span class="linenos">51</span></a>    <span class="n">exc</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="wait_for-52"><a href="#wait_for-52"><span class="linenos">52</span></a>
</span><span id="wait_for-53"><a href="#wait_for-53"><span class="linenos">53</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="wait_for-54"><a href="#wait_for-54"><span class="linenos">54</span></a>        <span class="k">await</span> <span class="n">group</span><span class="o">.</span><span class="n">wait_closing</span><span class="p">()</span>
</span><span id="wait_for-55"><a href="#wait_for-55"><span class="linenos">55</span></a>
</span><span id="wait_for-56"><a href="#wait_for-56"><span class="linenos">56</span></a>    <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="wait_for-57"><a href="#wait_for-57"><span class="linenos">57</span></a>        <span class="n">exc</span> <span class="o">=</span> <span class="n">e</span>
</span><span id="wait_for-58"><a href="#wait_for-58"><span class="linenos">58</span></a>
</span><span id="wait_for-59"><a href="#wait_for-59"><span class="linenos">59</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="wait_for-60"><a href="#wait_for-60"><span class="linenos">60</span></a>        <span class="k">await</span> <span class="n">uncancellable</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">async_close</span><span class="p">())</span>
</span><span id="wait_for-61"><a href="#wait_for-61"><span class="linenos">61</span></a>
</span><span id="wait_for-62"><a href="#wait_for-62"><span class="linenos">62</span></a>    <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="wait_for-63"><a href="#wait_for-63"><span class="linenos">63</span></a>        <span class="n">exc</span> <span class="o">=</span> <span class="n">e</span>
</span><span id="wait_for-64"><a href="#wait_for-64"><span class="linenos">64</span></a>
</span><span id="wait_for-65"><a href="#wait_for-65"><span class="linenos">65</span></a>    <span class="k">if</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="wait_for-66"><a href="#wait_for-66"><span class="linenos">66</span></a>        <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">cancelled</span><span class="p">():</span>
</span><span id="wait_for-67"><a href="#wait_for-67"><span class="linenos">67</span></a>            <span class="k">raise</span> <span class="n">exc</span>
</span><span id="wait_for-68"><a href="#wait_for-68"><span class="linenos">68</span></a>
</span><span id="wait_for-69"><a href="#wait_for-69"><span class="linenos">69</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">exception</span><span class="p">()</span> <span class="k">else</span> <span class="n">task</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</span><span id="wait_for-70"><a href="#wait_for-70"><span class="linenos">70</span></a>        <span class="k">raise</span> <span class="n">CancelledWithResultError</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">exception</span><span class="p">())</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
</span><span id="wait_for-71"><a href="#wait_for-71"><span class="linenos">71</span></a>
</span><span id="wait_for-72"><a href="#wait_for-72"><span class="linenos">72</span></a>    <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">cancelled</span><span class="p">():</span>
</span><span id="wait_for-73"><a href="#wait_for-73"><span class="linenos">73</span></a>        <span class="k">raise</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">()</span>
</span><span id="wait_for-74"><a href="#wait_for-74"><span class="linenos">74</span></a>
</span><span id="wait_for-75"><a href="#wait_for-75"><span class="linenos">75</span></a>    <span class="k">return</span> <span class="n">task</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>"Wait for the awaitable object to complete, with timeout.</p>

<p>Implementation <code>asyncio.wait_for</code> that ensure propagation of
CancelledError.</p>

<p>If task is cancelled with objects's result available, instead of
returning result, this implementation raises <code><a href="#CancelledWithResultError">CancelledWithResultError</a></code>.</p>
</div>


                </section>
    </main>
</body>
</html>